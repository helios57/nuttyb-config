{
  "label": "Cross Faction T2",
  "variable": "tweakdefs6",
  "generator": "json-schema",
  "definitions": [
    {
      "name": "Cross Faction Taxed Units (Factories)",
      "description": "Creates taxed versions of T2 factories",
      "scope": "UnitDefsLoop",
      "conditions": [
        { "type": "customParam", "key": "techlevel", "value": 2 },
        { "type": "customParamMatch", "key": "subfolder", "regex": "Fact" },
        { "type": "nameNotMatch", "regex": ".* %(Taxed%)$" }
      ],
      "mutations": [
        {
          "op": "clone_unit",
          "source": "SELF",
          "targetSuffix": "_taxed",
          "mutations": [
            { "op": "multiply", "field": "energyCost", "factor": 1.7 },
            { "op": "multiply", "field": "metalCost", "factor": 1.7 },
            {
              "op": "set",
              "field": "name",
              "value": {
                "type": "math",
                "expression": "name .. ' (Taxed)'",
                "variables": {}
              }
            },
            {
              "op": "table_merge",
              "field": "customparams",
              "value": {
                "i18n_en_humanname": {
                  "type": "math",
                  "expression": "humanname .. ' (Taxed)'",
                  "variables": { "humanname": "def.customparams.i18n_en_humanname" }
                }
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Cross Faction Taxed Units (Labs)",
      "description": "Creates taxed versions of T2 labs",
      "scope": "UnitDefsLoop",
      "conditions": [
        { "type": "customParam", "key": "techlevel", "value": 2 },
        { "type": "customParamMatch", "key": "subfolder", "regex": "Lab" },
        { "type": "nameNotMatch", "regex": ".* %(Taxed%)$" }
      ],
      "mutations": [
        {
          "op": "clone_unit",
          "source": "SELF",
          "targetSuffix": "_taxed",
          "mutations": [
            { "op": "multiply", "field": "energyCost", "factor": 1.7 },
            { "op": "multiply", "field": "metalCost", "factor": 1.7 },
            {
              "op": "set",
              "field": "name",
              "value": {
                "type": "math",
                "expression": "name .. ' (Taxed)'",
                "variables": {}
              }
            },
            {
              "op": "table_merge",
              "field": "customparams",
              "value": {
                "i18n_en_humanname": {
                  "type": "math",
                  "expression": "humanname .. ' (Taxed)'",
                  "variables": { "humanname": "def.customparams.i18n_en_humanname" }
                }
              }
            }
          ]
        }
      ]
    }
  ]
}
