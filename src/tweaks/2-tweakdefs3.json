{
  "label": "T4 Defences Test",
  "variable": "tweakdefs3",
  "generator": "json-schema",
  "definitions": [
    {
      "name": "Legendary Pulsar",
      "description": "Creates Legendary Pulsar from Armannit3",
      "scope": "Global",
      "conditions": [],
      "mutations": [
        {
          "op": "clone_unit",
          "source": "armannit3",
          "target": "legendary_pulsar",
          "mutations": [
            { "op": "set", "field": "name", "value": "Legendary Pulsar" },
            { "op": "set", "field": "description", "value": "A pinnacle of Armada engineering that fires devastating, rapid-fire tachyon bolts." },
            { "op": "set", "field": "buildTime", "value": 300000 },
            { "op": "set", "field": "health", "value": 30000 },
            { "op": "set", "field": "metalCost", "value": 43840 },
            { "op": "set", "field": "energyCost", "value": 1096000 },
            { "op": "set", "field": "icontype", "value": "armannit3" },
            {
              "op": "table_merge",
              "field": "customparams",
              "value": {
                "i18n_en_humanname": "Legendary Pulsar",
                "i18n_en_tooltip": "Fires devastating, rapid-fire tachyon bolts.",
                "techlevel": 4
              }
            },
            {
              "op": "modify_weapon",
              "weaponName": "tachyon_burst_cannon",
              "mutations": [
                { "op": "set", "field": "name", "value": "Tachyon Burst Cannon" },
                { "op": "set", "field": "damage", "value": { "default": 8000 } },
                { "op": "set", "field": "burst", "value": 3 },
                { "op": "set", "field": "burstrate", "value": 0.4 },
                { "op": "set", "field": "reloadtime", "value": 5 },
                { "op": "set", "field": "range", "value": 1800 },
                { "op": "set", "field": "energypershot", "value": 12000 }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "Legendary Bastion",
      "description": "Creates Legendary Bastion from Legbastion",
      "scope": "Global",
      "conditions": [],
      "mutations": [
        {
          "op": "clone_unit",
          "source": "legbastion",
          "target": "legendary_bastion",
          "mutations": [
            { "op": "set", "field": "name", "value": "Legendary Bastion" },
            { "op": "set", "field": "description", "value": "The ultimate defensive emplacement. Projects a devastating, pulsating heatray." },
            { "op": "set", "field": "health", "value": 22000 },
            { "op": "set", "field": "metalCost", "value": 65760 },
            { "op": "set", "field": "energyCost", "value": 1986500 },
            { "op": "set", "field": "buildTime", "value": 180000 },
            {
              "op": "table_merge",
              "field": "customparams",
              "value": {
                "i18n_en_humanname": "Legendary Bastion",
                "i18n_en_tooltip": "Projects a devastating, pulsating purple heatray.",
                "maxrange": 1450,
                "techlevel": 4
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Legendary Bulwark",
      "description": "Creates Legendary Bulwark from Cordoomt3",
      "scope": "Global",
      "conditions": [],
      "mutations": [
        {
          "op": "clone_unit",
          "source": "cordoomt3",
          "target": "legendary_bulwark",
          "mutations": [
            { "op": "set", "field": "name", "value": "Legendary Bulwark" },
            { "op": "set", "field": "description", "value": "A pinnacle of defensive technology, the Legendary Bulwark annihilates all who approach." },
            { "op": "set", "field": "health", "value": 42000 },
            { "op": "set", "field": "metalCost", "value": 61650 },
            { "op": "set", "field": "energyCost", "value": 1712500 },
            { "op": "set", "field": "buildTime", "value": 250000 },
            {
              "op": "table_merge",
              "field": "customparams",
              "value": {
                "i18n_en_humanname": "Legendary Bulwark",
                "i18n_en_tooltip": "The ultimate defensive structure.",
                "paralyzemultiplier": 0.2,
                "techlevel": 4
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Armada Commanders T4 Build Options",
      "description": "Adds Legendary Pulsar to Armada Commanders",
      "scope": "UnitDefsLoop",
      "conditions": [
        { "type": "nameStartsWith", "prefix": "armcomlvl" },
        { "type": "nameInList", "names": ["armt3airaide"] }
      ],
      "mutations": [
        { "op": "list_append", "field": "buildoptions", "value": "legendary_pulsar" }
      ]
    },
    {
      "name": "Cortex Commanders T4 Build Options",
      "description": "Adds Legendary Bulwark to Cortex Commanders",
      "scope": "UnitDefsLoop",
      "conditions": [
        { "type": "nameStartsWith", "prefix": "corcomlvl" },
        { "type": "nameInList", "names": ["cort3airaide"] }
      ],
      "mutations": [
        { "op": "list_append", "field": "buildoptions", "value": "legendary_bulwark" }
      ]
    },
    {
      "name": "Legion Commanders T4 Build Options",
      "description": "Adds Legendary Bastion to Legion Commanders",
      "scope": "UnitDefsLoop",
      "conditions": [
        { "type": "nameStartsWith", "prefix": "legcomlvl" },
        { "type": "nameInList", "names": ["legt3airaide"] }
      ],
      "mutations": [
        { "op": "list_append", "field": "buildoptions", "value": "legendary_bastion" }
      ]
    }
  ]
}
