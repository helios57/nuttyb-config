function gadget:GetInfo()return{name="NuttyB Master Gadget",desc="Combined logic and tweaks for NuttyB Mod",author="NuttyB Team (Generated)",date="2026",license="GPL",layer=0,enabled=true}end;if not gadgetHandler:IsSyncedCode()then return end;local a=Spring.AddTeamResource;local b=Spring.CreateUnit;local c=Spring.DestroyUnit;local d=Spring.Echo;local e=Spring.GetFPS;local f=Spring.GetGaiaTeamID;local g=Spring.GetGameFrame;local h=Spring.GetGameSpeed;local i=Spring.GetModOptions;local j=Spring.GetTeamList;local k=Spring.GetTeamStartPosition;local l=Spring.GetTeamUnits;local m=Spring.GetUnitCount;local n=Spring.GetUnitDefID;local o=Spring.GetUnitExperience;local p=Spring.GetUnitHealth;local q=Spring.GetUnitNearestEnemy;local r=Spring.GetUnitPosition;local s=Spring.GetUnitsInCylinder;local t=Spring.GiveOrderToUnit;local u=Spring.SendMessage;local v=Spring.SetUnitExperience;local w=Spring.SetUnitHealth;local x=Spring.SetUnitLabel;local y=Spring.SetUnitNeutral;local z=Spring.SpawnCEG;local A=Spring.ValidUnitID;local UnitDefs=UnitDefs;local assert=assert;local error=error;local ipairs=ipairs;local B=math.abs;local C=math.ceil;local D=math.floor;local E=math.max;local F=math.min;local G=math.random;local H=math.sqrt;local next=next;local pairs=pairs;local select=select;local I=string.find;local J=string.format;local K=string.len;local L=string.match;local M=string.sub;local N=table.concat;local O=table.contains;local P=table.copy;local Q=table.insert;local R=table.remove;local S=table.sort;local tonumber=tonumber;local tostring=tostring;local type=type;local unpack=unpack;local T;local U;local V;local W;local X;local Y;local Z;local _;local a0;local a1;local a2;local a3;local a4;local function a5(a6,a7)for a8,a9 in pairs(a7)do if type(a9)=="table"and type(a6[a8])=="table"then a5(a6[a8],a9)else a6[a8]=a9 end end;return a6 end;local function aa(a6,a7)if not a6 or not a7 then return end;for a8,a9 in pairs(a7)do if type(a9)=="table"and type(a6[a8])=="table"then aa(a6[a8],a9)else a6[a8]=a9 end end end;local function P(ab)if type(ab)~="table"then return ab end;local ac={}for a8,a9 in pairs(ab)do if type(a9)=="table"then ac[a8]=P(a9)else ac[a8]=a9 end end;return ac end;if not table.merge then table.merge=a5 end;if not table.mergeInPlace then table.mergeInPlace=aa end;if not table.copy then table.copy=P end;do local ad,ae,af,ag,ah,ai,aj=UnitDefs or{},1.7,{},{},Json.decode(VFS.LoadFile('language/en/units.json')),'_taxed',' (Taxed)'local function ak(al,am,an)local ao=ad[al]local ap=an and an[am]or ad[am]if not ao or not ap or not am then return end;ao.buildoptions=ao.buildoptions or{}for aq=1,#ao.buildoptions do if ao.buildoptions[aq]==am then return end end;ao.buildoptions[#ao.buildoptions+1]=am end;for ar,as in pairs(ad)do if as.customparams and as.customparams.subfolder and(as.customparams.subfolder:match'Fact'or as.customparams.subfolder:match'Lab')and as.customparams.techlevel==2 then local at=ah and ah.units.names[ar]or ar;af[ar]=true;ag[ar..ai]=a5(as,{energycost=as.energycost*ae,icontype=ar,metalcost=as.metalcost*ae,name=at..aj,customparams={i18n_en_humanname=at..aj,i18n_en_tooltip=ah and ah.units.descriptions[ar]or ar}})end end;for al,ao in pairs(ad)do if ao.buildoptions then for au,am in pairs(ao.buildoptions)do if af[am]then for au,av in pairs{'arm','cor','leg'}do local aw=av..am:sub(4)..ai;if am:sub(1,3)~=av and ag[aw]then ak(al,aw,ag)end end end end end end;aa(ad,ag)end;local ax,pairs,ay=UnitDefs or{},pairs,a5;for aq,az in pairs(ax)do if M(aq,1,24)=='raptor_air_fighter_basic'then if az.weapondefs then for aA,a8 in pairs(az.weapondefs)do a8.name='Spike'a8.accuracy=200;a8.collidefriendly=0;a8.collidefeature=0;a8.avoidfeature=0;a8.avoidfriendly=0;a8.areaofeffect=64;a8.edgeeffectiveness=0.3;a8.explosiongenerator='custom:raptorspike-large-sparks-burn'a8.cameraShake={}a8.dance={}a8.interceptedbyshieldtype=0;a8.model='Raptors/spike.s3o'a8.reloadtime=1.1;a8.soundstart='talonattack'a8.startvelocity=200;a8.submissile=1;a8.smoketrail=0;a8.smokePeriod={}a8.smoketime={}a8.smokesize={}a8.smokecolor={}a8.soundhit={}a8.texture1={}a8.texture2={}a8.tolerance={}a8.tracks=0;a8.turnrate=60000;a8.weaponacceleration=100;a8.weapontimer=1;a8.weaponvelocity=1000;a8.weapontype={}a8.wobble={}end end else if aq:match'^[acl][ore][rgm]com'and not aq:match'_scav$'then aa(az,{customparams={combatradius=0,fall_damage_multiplier=0,paratrooper=true,wtboostunittype={}},featuredefs={dead={damage=9999999,reclaimable=false,mass=9999999}}})end end end;local aB={raptor_air_kamikaze_basic_t2_v1={selfdestructas='raptor_empdeath_big'},raptor_land_swarmer_emp_t2_v1={weapondefs={raptorparalyzersmall={damage={shields=70},paralyzetime=6}}},raptor_land_assault_emp_t2_v1={weapondefs={raptorparalyzerbig={damage={shields=150},paralyzetime=10}}},raptor_allterrain_arty_emp_t2_v1={weapondefs={goolauncher={paralyzetime=6}}},raptor_allterrain_arty_emp_t4_v1={weapondefs={goolauncher={paralyzetime=10}}},raptor_air_bomber_emp_t2_v1={weapondefs={weapon={damage={shields=1100,default=2000},paralyzetime=10}}},raptor_allterrain_swarmer_emp_t2_v1={weapondefs={raptorparalyzersmall={damage={shields=70},paralyzetime=6}}},raptor_allterrain_assault_emp_t2_v1={weapondefs={raptorparalyzerbig={damage={shields=150},paralyzetime=6}}},raptor_matriarch_electric={weapondefs={goo={paralyzetime=13},melee={paralyzetime=13},spike_emp_blob={paralyzetime=13}}}}for aC,aD in pairs(aB)do if ax[aC]then ax[aC]=ay(ax[aC],aD)end end;for aA,aE in pairs({'raptor_antinuke','raptor_turret_acid_t2_v1','raptor_turret_acid_t3_v1','raptor_turret_acid_t4_v1','raptor_turret_antiair_t2_v1','raptor_turret_antiair_t3_v1','raptor_turret_antiair_t4_v1','raptor_turret_antinuke_t2_v1','raptor_turret_antinuke_t3_v1','raptor_turret_basic_t2_v1','raptor_turret_basic_t3_v1','raptor_turret_basic_t4_v1','raptor_turret_burrow_t2_v1','raptor_turret_emp_t2_v1','raptor_turret_emp_t3_v1','raptor_turret_emp_t4_v1','raptor_worm_green'})do local aF=ax[aE]if aF then aF.maxthisunit=10;aF.health=aF.health*2;if aF.weapondefs then for aA,aG in pairs(aF.weapondefs)do aG.reloadtime=aG.reloadtime/1.5;aG.range=aG.range/2 end end end end;for aA,aH in pairs(ax)do if aH.builder==true then if aH.canfly==true then aH.explodeas=''aH.selfdestructas=''end end end;local aI={'raptor_air_bomber_basic_t2_v1','raptor_air_bomber_basic_t2_v2','raptor_air_bomber_basic_t4_v1','raptor_air_bomber_basic_t4_v2','raptor_air_bomber_basic_t1_v1'}for aA,ab in pairs(aI)do local az=ax[ab]if az then if az.weapondefs then for aA,aJ in pairs(az.weapondefs)do aJ.damage.default=aJ.damage.default/1.30 end end end end;local a9={'armrespawn','correspawn','legnanotcbase'}for aA,aq in ipairs(a9)do local aK=UnitDefs[aq]if aK then aK.cantbetransported,aK.footprintx,aK.footprintz=false,4,4;aK.customparams=aK.customparams or{}aK.customparams.paratrooper=true;aK.customparams.fall_damage_multiplier=0 end end;local UnitDefs=UnitDefs or{}local function aL(aM)local aN={}for aO,aP in pairs(aM)do aN[aO]=type(aP)=="table"and aL(aP)or aP end;return aN end;local function aQ(aR,a8)for aO,aP in pairs(a8)do if type(aP)=="table"then aR[aO]=aR[aO]or{}aQ(aR[aO],aP)else if aR[aO]==nil then aR[aO]=aP end end end;local function aS(aT,aU,aV)if UnitDefs[aT]and not UnitDefs[aU]then local aN=aL(UnitDefs[aT])aQ(aN,aV)UnitDefs[aU]=aN end end;local aW={{"raptor_land_swarmer_basic_t1_v1","raptor_hive_swarmer_basic",{name="Hive Spawn",customparams={i18n_en_humanname="Hive Spawn",i18n_en_tooltip="Raptor spawned to defend hives from attackers."}}},{"raptor_land_assault_basic_t2_v1","raptor_hive_assault_basic",{name="Armored Assault Raptor",customparams={i18n_en_humanname="Armored Assault Raptor",i18n_en_tooltip="Heavy, slow, and unyielding—these beasts are made to take the hits others cant."}}},{"raptor_land_assault_basic_t4_v1","raptor_hive_assault_heavy",{name="Heavy Armored Assault Raptor",customparams={i18n_en_humanname="Heavy Armored Assault Raptor",i18n_en_tooltip="Lacking speed, these armored monsters make up for it with raw, unbreakable toughness."}}},{"raptor_land_assault_basic_t4_v2","raptor_hive_assault_superheavy",{name="Super Heavy Armored Assault Raptor",customparams={i18n_en_humanname="Super Heavy Armored Assault Raptor",i18n_en_tooltip="These super-heavy armored beasts may be slow, but they're built to take a pounding and keep rolling."}}},{"raptorartillery","raptor_evolved_motort4",{name="Evolved Lobber",customparams={i18n_en_humanname="Evolved Lobber",i18n_en_tooltip="These lobbers did not just evolve—they became deadlier than anything before them."}}},{"raptor_land_swarmer_acids_t2_v1","raptor_land_swarmer_acids_t2_v1",{name="Acid Spawnling",customparams={i18n_en_humanname="Acid Spawnling",i18n_en_tooltip="This critters are so cute but can be so deadly at the same time."}}}}for aA,aX in ipairs(aW)do aS(aX[1],aX[2],aX[3])end;local aY=UnitDef_Post;function UnitDef_Post(aZ,a_)if aY and aY~=UnitDef_Post then aY(aZ,a_)end;local b0=UnitDefs["raptor_land_swarmer_basic_t1_v1"]and UnitDefs["raptor_land_swarmer_basic_t1_v1"].health;local b1={texture1={},texture2={},tracks=false,weaponvelocity=4000,smokePeriod={},smoketime={},smokesize={},smokecolor={},smoketrail=0}local b2={accuracy=2048,areaofeffect=256,burst=4,burstrate=0.4,flighttime=12,dance=25,craterareaofeffect=256,edgeeffectiveness=0.7,cegtag="blob_trail_blue",explosiongenerator="custom:genericshellexplosion-huge-bomb",impulsefactor=0.4,intensity=0.3,interceptedbyshieldtype=1,range=2300,reloadtime=10,rgbcolor="0.2 0.5 0.9",size=8,sizedecay=0.09,soundhit="bombsmed2",soundstart="bugarty",sprayangle=2048,tolerance=60000,turnrate=6000,trajectoryheight=2,turret=true,weapontype="Cannon",weaponvelocity=520,startvelocity=140,weaponacceleration=125,weapontimer=0.2,wobble=14500,highTrajectory=1,damage={default=900,shields=600}}local b3={accuracy=1024,areaofeffect=24,burst=1,burstrate=0.3,cegtag="blob_trail_green",edgeeffectiveness=0.63,explosiongenerator="custom:raptorspike-small-sparks-burn",impulsefactor=1,intensity=0.4,interceptedbyshieldtype=1,name="Acid",range=250,reloadtime=1,rgbcolor="0.8 0.99 0.11",size=1,stages=6,soundhit="bloodsplash3",soundstart="alien_bombrel",sprayangle=128,tolerance=5000,turret=true,weapontimer=0.1,weapontype="Cannon",weaponvelocity=320,damage={default=80}}local b4={raptor_hive_swarmer_basic={metalcost=350,nochasecategory="OBJECT",icontype="raptor_land_swarmer_basic_t1_v1"},raptor_hive_assault_basic={metalcost=3000,health=25000,speed=20.0,nochasecategory="OBJECT",icontype="raptor_land_assault_basic_t2_v1",weapondefs={aaweapon=b1}},raptor_hive_assault_heavy={metalcost=6000,health=30000,speed=17.0,nochasecategory="OBJECT",icontype="raptor_land_assault_basic_t4_v1",weapondefs={aaweapon=b1}},raptor_hive_assault_superheavy={metalcost=9000,health=35000,speed=16.0,nochasecategory="OBJECT",icontype="raptor_land_assault_basic_t4_v2",weapondefs={aaweapon=b1}},raptor_evolved_motort4={icontype="raptor_allterrain_arty_basic_t4_v1",weapondefs={poopoo=b2},weapons={[1]={badtargetcategory="MOBILE",def="poopoo",maindir="0 0 1",maxangledif=50,onlytargetcategory="NOTAIR"}}},raptor_land_swarmer_acids_t2_v1={metalcost=375,energycost=600,health=b0*2,icontype="raptor_land_swarmer_basic_t1_v1",buildpic="raptors/raptorh1b.DDS",objectname="Raptors/raptor_droneb.s3o",weapondefs={throwup=b3},weapons={[1]={def="throwup",onlytargetcategory="NOTAIR",maindir="0 0 1",maxangledif=180}}}}for aq,b5 in pairs(b4)do local az=UnitDefs[aq]if az then for aO,aP in pairs(b5)do if aO=="weapondefs"then az.weapondefs=az.weapondefs or{}for b6,b7 in pairs(aP)do az.weapondefs[b6]=az.weapondefs[b6]or{}for b8,b9 in pairs(b7)do az.weapondefs[b6][b8]=b9 end end elseif aO=="weapons"then az.weapons=aP else az[aO]=aP end end end end end end;if tonumber(i().meganuke)==1 then VFS.Include("lua/Defs_Mega_Nuke.lua")end;do local ax,ba,ay,bb,bc,bd,aA=UnitDefs or{},{'arm','cor','leg'},a5,{arm='Armada ',cor='Cortex ',leg='Legion '},'_taxed',1.5,O;local function be(aq,az,a8)if ax[aq]and not ax[az]then ax[az]=ay(ax[aq],a8)end end;for aB,aC in pairs(ba)do local aD,aE,aF=aC=='arm',aC=='cor',aC=='leg'be(aC..'nanotct2',aC..'nanotct3',{metalcost=3700,energycost=62000,builddistance=550,buildtime=108000,collisionvolumescales='61 128 61',footprintx=6,footprintz=6,health=8800,mass=37200,sightdistance=575,workertime=1900,icontype="armnanotct2",canrepeat=true,objectname=aF and'Units/legnanotcbase.s3o'or aE and'Units/CORRESPAWN.s3o'or'Units/ARMRESPAWN.s3o',customparams={i18n_en_humanname='T3 Construction Turret',i18n_en_tooltip='More BUILDPOWER! For the connoisseur'}})be(aF and'legamstor'or aC..'uwadvms',aF and'legamstort3'or aC..'uwadvmst3',{metalstorage=30000,metalcost=4200,energycost=231150,buildtime=142800,health=53560,maxthisunit=10,icontype="armuwadves",name=bb[aC]..'T3 Metal Storage',customparams={i18n_en_humanname='T3 Hardened Metal Storage',i18n_en_tooltip=[[The big metal storage tank for your most precious resources. Chopped chicken!]]}})be(aF and'legadvestore'or aC..'uwadves',aF and'legadvestoret3'or aC..'advestoret3',{energystorage=272000,metalcost=2100,energycost=59000,buildtime=93380,health=49140,icontype="armuwadves",maxthisunit=10,name=bb[aC]..'T3 Energy Storage',customparams={i18n_en_humanname='T3 Hardened Energy Storage',i18n_en_tooltip='Power! Power! We need power!1!'}})for aB,aG in pairs({aC..'nanotc',aC..'nanotct2'})do if ax[aG]then ax[aG].canrepeat=true end end;local aH=aD and'armshltx'or aE and'corgant'or'leggant'local aI=ax[aH]if aI then be(aH,aH..bc,{energycost=aI.energycost*bd,icontype=aH,metalcost=aI.metalcost*bd,name=bb[aC]..'Experimental Gantry Taxed',customparams={i18n_en_humanname=bb[aC]..'Experimental Gantry Taxed',i18n_en_tooltip='Produces Experimental Units'}})end;local ab,aJ={},{aC..'nanotct2',aC..'nanotct3',aC..'alab',aC..'avp',aC..'aap',aC..'gatet3',aC..'flak',aF and'legdeflector'or aC..'gate',aF and'legforti'or aC..'fort',aD and'armshltx'or aC..'gant'}for aB,a9 in ipairs(aJ)do ab[#ab+1]=a9 end;local aK={arm={'corgant','leggant'},cor={'armshltx','leggant'},leg={'armshltx','corgant'}}for aB,aL in ipairs(aK[aC]or{})do ab[#ab+1]=aL..bc end;local aM={arm={'armamd','armmercury','armbrtha','armminivulc','armvulc','armannit3','armlwall','armannit4'},cor={'corfmd','corscreamer','cordoomt3','corbuzz','corminibuzz','corint','corhllllt','cormwall','cordoomt4','epic_calamity'},leg={'legabm','legstarfall','legministarfall','leglraa','legbastion','legrwall','leglrpc','legbastiont4','legdtf'}}for aB,a9 in ipairs(aM[aC]or{})do ab[#ab+1]=a9 end;local az=aC..'t3aide'be(aC..'decom',az,{blocking=true,builddistance=350,buildtime=140000,energycost=200000,energyupkeep=2000,health=10000,idleautoheal=5,idletime=1800,maxthisunit=10,metalcost=12600,speed=85,terraformspeed=3000,turninplaceanglelimit=1.890,turnrate=1240,workertime=6000,reclaimable=true,candgun=false,name=bb[aC]..'Epic Aide',customparams={subfolder='ArmBots/T3',techlevel=3,unitgroup='buildert3',i18n_en_humanname='Epic Ground Construction Aide',i18n_en_tooltip='Your Aide that helps you construct buildings'},buildoptions=ab})if ax[az]then ax[az].weapondefs={}ax[az].weapons={}end;az=aC..'t3airaide'be('armfify',az,{blocking=false,canassist=true,cruisealtitude=3000,builddistance=1750,buildtime=140000,energycost=200000,energyupkeep=2000,health=1100,idleautoheal=5,idletime=1800,icontype="armnanotct2",maxthisunit=10,metalcost=13400,speed=25,category="OBJECT",terraformspeed=3000,turninplaceanglelimit=1.890,turnrate=1240,workertime=1600,buildpic='ARMFIFY.DDS',name=bb[aC]..'Epic Aide',customparams={is_builder=true,subfolder='ArmBots/T3',techlevel=3,unitgroup='buildert3',i18n_en_humanname='Epic Air Construction Aide',i18n_en_tooltip='Your Aide that helps you construct buildings'},buildoptions=ab})if ax[az]then ax[az].weapondefs={}ax[az].weapons={}end;local aN=aD and'armshltx'or aE and'corgant'or'leggant'if ax[aN]and ax[aN].buildoptions then local aO=aC..'t3aide'if not aA(ax[aN].buildoptions,aO)then Q(ax[aN].buildoptions,aO)end end;aN=aC..'apt3'if ax[aN]and ax[aN].buildoptions then local aP=aC..'t3airaide'if not aA(ax[aN].buildoptions,aP)then Q(ax[aN].buildoptions,aP)end end end end;do local ax,ba=UnitDefs or{},{'armack','armaca','armacv','corack','coraca','coracv','legack','legaca','legacv'}local function ak(al,am)local ao=ax[al]local ap=am and ax[am]if not ao or not ap then return end;ao.buildoptions=ao.buildoptions or{}for aq=1,#ao.buildoptions do if ao.buildoptions[aq]==am then return end end;ao.buildoptions[#ao.buildoptions+1]=am end;for au,bf in pairs({'armmmkrt3','cormmkrt3','legadveconvt3'})do aa(ax[bf],{footprintx=6,footprintz=6})end;for au,al in pairs(ba)do local bg=al:sub(1,3)ak(al,bg..'afust3')ak(al,bg=='leg'and'legadveconvt3'or bg..'mmkrt3')end;for au,bg in pairs({'arm','cor','leg'})do local bh=bg..'t3aide'local bi=bg..'t3airaide'local bj={bg..'afust3',bg=='leg'and'legadveconvt3'or bg..'mmkrt3',bg=='leg'and'legamstort3'or bg..'uwadvmst3',bg=='leg'and'legadvestoret3'or bg..'advestoret3'}for au,am in ipairs(bj)do ak(bh,am)ak(bi,am)end end;ak('legck','legdtf')for au,bf in pairs({'coruwadves','legadvestore'})do aa(ax[bf],{footprintx=4,footprintz=4})end end;do local bk=UnitDefs or{}local bl=aa or a5;local bm={customparams={i18n_en_humanname='Experimental Tyrannus',i18n_en_tooltip='In dedication to our commander Tyrannus'},weapondefs={machinegun={accuracy=400,areaofeffect=64,avoidfriendly=false,avoidfeature=false,collidefriendly=false,collidefeature=true,maxthisunit=80,beamtime=0.09,corethickness=0.55,duration=0.09,burst=1,burstrate=0.1,explosiongenerator="custom:genericshellexplosion-tiny-aa",energypershot=0,falloffrate=0,firestarter=50,interceptedbyshieldtype=4,intensity=2,name="scav rapid fire plasma gun",range=1000,reloadtime=0.1,weapontype="LaserCannon",rgbcolor="1 0 0",rgbcolor2="1 1 1",soundtrigger=true,soundstart="tgunshipfire",texture1="shot",texture2="explo2",thickness=8.5,tolerance=1000,turret=true,weaponvelocity=1000,damage={default=60}},heatray1={allowNonBlockingAim=true,avoidfriendly=true,areaofeffect=64,avoidfeature=false,beamtime=0.033,camerashake=0.1,collidefriendly=false,corethickness=0.45,craterareaofeffect=12,craterboost=0,cratermult=0,edgeeffectiveness=1,energypershot=0,explosiongenerator="custom:heatray-large",firestarter=90,firetolerance=300,impulsefactor=0,intensity=9,laserflaresize=8,name='Experimental Thermal Ordnance Generators',noselfdamage=true,proximitypriority=-1,range=850,reloadtime=0.033,rgbcolor="1 0.55 0",rgbcolor2="0.9 1.0 0.5",scrollspeed=5,soundhitdry='heatray3start',soundhitwet='sizzle',soundstart='heatray3lp',soundstartvolume=6,soundtrigger=1,thickness=6,turret=true,weapontype='BeamLaser',weaponvelocity=1500,damage={default=150}},ata={areaofeffect=34,avoidfeature=false,beamtime=2,collidefriendly=false,corethickness=0.5,craterareaofeffect=0,craterboost=0,cratermult=0,edgeeffectiveness=0.30,energypershot=7000,explosiongenerator='custom:laserhit-large-blue',firestarter=90,impulsefactor=0,largebeamlaser=true,laserflaresize=7,name='Heavy long-range g2g tachyon accelerator beam',noselfdamage=true,range=1300,reloadtime=15,rgbcolor='0 1 1',scrollspeed=5,soundhitdry='',soundhitwet='sizzle',soundstart='raptorlaser',soundtrigger=1,soundstartvolume=4,texture3='largebeam',thickness=10,tilelength=150,tolerance=10000,turret=true,weapontype='BeamLaser',weaponvelocity=3100,damage={commanders=480,default=48000}}},weapons={[1]={badtargetcategory="NOTLAND",def="heatray1",maindir="-1 0 0",maxangledif=210,onlytargetcategory="SURFACE"},[2]={badtargetcategory="NOTLAND",def="heatray1",maindir="1 0 0",maxangledif=210,onlytargetcategory="SURFACE"},[3]={def="ata",maindir="1 0 0",maxangledif=190,onlytargetcategory="SURFACE"},[4]={def="machinegun",onlytargetcategory="SURFACE"},[5]={def="machinegun",onlytargetcategory="SURFACE"}}}if bk.legfortt4 then bl(bk.legfortt4,bm)else bk.legfortt4=bm end end;do local ax,ba,ay=UnitDefs or{},a5,'armannit4'if ax['armannit3']then ax[ay]=ba(ax['armannit3'],{name='Legendary Pulsar',description='Rapid tachyon burst supergun.',buildtime=240000,health=30000,metalcost=43840,energycost=1096000,icontype="armannit3",customparams={i18n_en_humanname='Legendary Pulsar',i18n_en_tooltip='Fires devastating, rapid-fire tachyon bolts',techlevel=4},weapondefs={tachyon_burst_cannon={collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,name='Tachyon Burst Cannon',weapontype='LaserCannon',rgbcolor='1 0 1',burst=3,burstrate=0.40,reloadtime=5,accuracy=400,areaofeffect=12,range=1800,energypershot=12000,turret=true,soundstart='annigun1',soundhit='xplolrg3',size=6,impulsefactor=0,weaponvelocity=3100,thickness=10,laserflaresize=8,texture3="largebeam",tilelength=150,tolerance=10000,beamtime=3,explosiongenerator='custom:tachyonshot',damage={default=8000},allowNonBlockingAim=true}},weapons={[1]={badtargetcategory="VTOL GROUNDSCOUT",def='tachyon_burst_cannon',onlytargetcategory='SURFACE'}}})end;local bn={'armaca','armack','armacsub','armacv','armt3airaide','armt3aide'}local function ak(al,am)local ao=ax[al]local ap=am and ax[am]if not ao or not ap then return end;ao.buildoptions=ao.buildoptions or{}for aq=1,#ao.buildoptions do if ao.buildoptions[aq]==am then return end end;ao.buildoptions[#ao.buildoptions+1]=am end;for aq=3,10 do bn[#bn+1]='armcomlvl'..aq end;for au,bo in pairs(bn)do ak(bo,ay)end end;do local ax,ba,ay=UnitDefs or{},a5,'legbastiont4'if ax['legbastion']then ax[ay]=ba(ax['legbastion'],{name='Legendary Bastion',description='Purple heatray defensive tower.',health=28000,metalcost=65760,energycost=1986500,buildtime=180000,footprintx=6,footprintz=6,icontype="legbastion",objectname='scavs/scavbeacon_t4.s3o',script='scavs/scavbeacon.cob',buildpic='scavengers/SCAVBEACON.DDS',damagemodifier=0.20,customparams={i18n_en_humanname='Legendary Bastion',i18n_en_tooltip='Projects a devastating purple heatray',maxrange=1450,techlevel=4},weapondefs={legendary_bastion_ray={areaofeffect=24,collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,beamtime=0.3,camerashake=0,corethickness=0.3,craterareaofeffect=120,craterboost=0,cratermult=0,edgeeffectiveness=0.45,energypershot=3000,explosiongenerator="custom:laserhit-medium-purple",firestarter=90,firetolerance=300,impulsefactor=0,laserflaresize=2,name="Legendary Heat Ray",noselfdamage=true,predictboost=0.3,proximitypriority=1,range=1450,reloadtime=0.3,rgbcolor="1.0 0.2 1.0",rgbcolor2="0.9 1.0 0.5",soundhitdry="",soundhitwet="sizzle",soundstart="banthie2",soundstartvolume=25,soundtrigger=1,thickness=5.5,turret=true,weapontype="BeamLaser",weaponvelocity=1500,allowNonBlockingAim=true,damage={default=2500,vtol=15}}},weapons={[1]={badtargetcategory='VTOL GROUNDSCOUT',def='legendary_bastion_ray',onlytargetcategory='SURFACE'}}})end;local bp={'legaca','legack','legacsub','legacv','legt3airaide','legt3aide'}local function ak(al,am)local ao=ax[al]local ap=am and ax[am]if not ao or not ap then return end;ao.buildoptions=ao.buildoptions or{}for aq=1,#ao.buildoptions do if ao.buildoptions[aq]==am then return end end;ao.buildoptions[#ao.buildoptions+1]=am end;for aq=3,10 do bp[#bp+1]='legcomlvl'..aq end;for au,bo in pairs(bp)do ak(bo,ay)end end;do local ax,ba,ay=UnitDefs or{},a5,'cordoomt4'if ax['cordoomt3']then ax[ay]=ba(ax['cordoomt3'],{name='Legendary Bulwark',description='Defensive bulwark annihilates approachers',buildtime=250000,health=42000,metalcost=61650,energycost=1712500,damagemodifier=0.15,energystorage=5000,radardistance=1400,sightdistance=1100,icontype="cordoomt3",customparams={i18n_en_humanname='Legendary Bulwark',i18n_en_tooltip='The ultimate defensive structure',paralyzemultiplier=0.2,techlevel=4},weapondefs={legendary_overload_scatter={collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,name='Overload Scatter Beamer',weapontype='BeamLaser',range=1000,reloadtime=0.1,sprayangle=2000,projectiles=12,rgbcolor='0.8 0.1 1.0',accuracy=50,areaofeffect=8,beamdecay=0.05,beamtime=0.1,beamttl=1,corethickness=0.05,burnblow=true,cylindertargeting=1,edgeeffectiveness=0.15,explosiongenerator='custom:laserhit-medium-purple',firestarter=100,impulsefactor=0.123,intensity=0.3,laserflaresize=11.35,noselfdamage=true,soundhitwet='sizzle',soundstart='beamershot2',tolerance=5000,thickness=2,turret=true,weaponvelocity=1000,damage={default=600}},legendary_heat_ray={collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,name='Armageddon Heat Ray',weapontype='BeamLaser',range=1300,reloadtime=4.0,areaofeffect=72,beamtime=0.6,cameraShake=350,corethickness=0.40,craterareaofeffect=72,energypershot=1200,explosiongenerator='custom:genericshellexplosion-medium-beam',impulsefactor=0,largebeamlaser=true,laserflaresize=8.8,noselfdamage=true,rgbcolor='0.9 1.0 0.5',rgbcolor2='0.8 0 0',scrollspeed=5,soundhitdry='',soundhitwet='sizzle',soundstart='heatray2xl',soundtrigger=1,thickness=7,tolerance=10000,turret=true,weaponvelocity=1800,damage={default=9000,commanders=1350}},legendary_point_defense={collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,name='Point Defense Laser',weapontype='BeamLaser',range=750,reloadtime=0.5,areaofeffect=12,beamtime=0.3,corethickness=0.32,energypershot=500,explosiongenerator='custom:laserhit-large-blue',firestarter=90,impactonly=1,impulsefactor=0,largebeamlaser=true,laserflaresize=8.8,noselfdamage=true,proximitypriority=0,rgbcolor='0 0 1',soundhitdry='',soundhitwet='sizzle',soundstart='annigun1',soundtrigger=1,texture3='largebeam',thickness=5.5,tilelength=150,tolerance=10000,turret=true,weaponvelocity=1500,damage={default=450,commanders=999}}},weapons={[1]={def='legendary_overload_scatter',onlytargetcategory='SURFACE'},[2]={def='legendary_heat_ray',onlytargetcategory='SURFACE'},[3]={def='legendary_point_defense',onlytargetcategory='SURFACE'}}})end;local bq={'coraca','corack','coracsub','coracv','cort3airaide','cort3aide'}local function ak(al,am)local ao=ax[al]local ap=am and ax[am]if not ao or not ap then return end;ao.buildoptions=ao.buildoptions or{}for aq=1,#ao.buildoptions do if ao.buildoptions[aq]==am then return end end;ao.buildoptions[#ao.buildoptions+1]=am end;for aq=3,10 do bq[#bq+1]='corcomlvl'..aq end;for au,bo in pairs(bq)do ak(bo,ay)end end;do local ad=UnitDefs or{}local bl=a5;local br={'arm','cor','leg'}local bs=2.0;local bt=1.3;local function bu(bv,bw,bx)if ad[bv]and not ad[bw]then ad[bw]=bl(ad[bv],bx)end end;local function by(bz,bx)if ad[bz]then ad[bz]=bl(ad[bz],bx)end end;local function bA(bB,bC)if bB then return C(bB*bC)end;return nil end;local function ak(al,am)local ao=ad[al]local bD=ad[am]if not ao or not bD then return end;ao.buildoptions=ao.buildoptions or{}for aq=1,#ao.buildoptions do if ao.buildoptions[aq]==am then return end end;ao.buildoptions[#ao.buildoptions+1]=am end;for au,bE in ipairs(br)do local bF=bE=='leg'local bG=bF and'legadveconvt3'or bE..'mmkrt3'local bH=ad[bG]if bH then local bI=bH.customparams or{}local bJ=bG..'_200'bu(bG,bJ,{description='Legendary Energy Converter by Jackie',metalcost=bA(bH.metalcost,bs),energycost=bA(bH.energycost,bs),buildtime=bA(bH.buildtime,bs),health=bA(bH.health,bs*6),customparams={energyconv_capacity=bA(bI.energyconv_capacity,2),energyconv_efficiency=0.022,buildinggrounddecaldecayspeed=bI.buildinggrounddecaldecayspeed,buildinggrounddecalsizex=bI.buildinggrounddecalsizex,buildinggrounddecalsizey=bI.buildinggrounddecalsizey,buildinggrounddecaltype=bI.buildinggrounddecaltype,model_author=bI.model_author,normaltex=bI.normaltex,removestop=bI.removestop,removewait=bI.removewait,subfolder=bI.subfolder,techlevel=bI.techlevel,unitgroup=bI.unitgroup,usebuildinggrounddecal=bI.usebuildinggrounddecal,i18n_en_humanname='Legendary Energy Converter',i18n_en_tooltip='Convert 12k energy to 264m/s by Jackie (Extremely Explosive)'},name='Legendary Energy Converter',buildpic=bH.buildpic,objectname=bH.objectname,footprintx=6,footprintz=6,yardmap=bH.yardmap,script=bH.script,activatewhenbuilt=bH.activatewhenbuilt,sightdistance=bH.sightdistance,seismicsignature=bH.seismicsignature,idleautoheal=bH.idleautoheal,idletime=bH.idletime,maxslope=bH.maxslope,maxwaterdepth=bH.maxwaterdepth,maxacc=bH.maxacc,maxdec=bH.maxdec,explodeas="fusionExplosion",selfdestructas="fusionExplosion",corpse=bH.corpse,canrepeat=bH.canrepeat})end;local bK=bE..'afust3'local bL=ad[bK]if bL then local bI=bL.customparams or{}local bM=bK..'_200'bu(bK,bM,{buildtime=bA(bL.buildtime,1.8),name='Legendary Fusion Reactor',description='Legendary Fusion Reactor by Jackie (Extremely Explosive)',metalcost=bA(bL.metalcost,bs),energycost=bA(bL.energycost,bs),energymake=bA(bL.energymake,2.4),energystorage=bA(bL.energystorage,6.0),health=bA(bL.health,bs*3),buildpic=bL.buildpic,collisionvolumeoffsets=bL.collisionvolumeoffsets,collisionvolumescales=bL.collisionvolumescales,collisionvolumetype=bL.collisionvolumetype,damagemodifier=0.95,buildangle=bL.buildangle,objectname=bL.objectname,footprintx=12,footprintz=12,yardmap=bL.yardmap,script=bL.script,activatewhenbuilt=bL.activatewhenbuilt,sightdistance=bL.sightdistance,seismicsignature=bL.seismicsignature,idleautoheal=bA(bL.idleautoheal,6),idletime=bL.idletime,maxslope=bL.maxslope,maxwaterdepth=bL.maxwaterdepth,maxacc=bL.maxacc,maxdec=bL.maxdec,explodeas="ScavComBossExplo",selfdestructas="ScavComBossExplo",corpse=bL.corpse,canrepeat=bL.canrepeat,customparams={buildinggrounddecaldecayspeed=30,buildinggrounddecalsizex=18,buildinggrounddecalsizey=18,buildinggrounddecaltype=bI.buildinggrounddecaltype,model_author=bI.model_author,normaltex=bI.normaltex,subfolder=bI.subfolder,removestop=true,removewait=true,techlevel=3,unitgroup="energy",usebuildinggrounddecal=true,i18n_en_humanname='Legendary Fusion Reactor',i18n_en_tooltip='Convert 12k energy to 264m/s by Jackie (Extremely Explosive)'},sfxtypes={pieceexplosiongenerators={[1]="deathceg2",[2]="deathceg3",[3]="deathceg4"}},sounds={canceldestruct="cancel2",underattack="warning1",count={"count6","count5","count4","count3","count2","count1"},select={"fusion2"}}})end;local bN=bE..'t3aide'local bO=bE..'t3airaide'local bP={bG and bG..'_200'or nil,bK and bK..'_200'or nil}for au,am in ipairs(bP)do if am then ak(bN,am)ak(bO,am)end end end;local bQ={'armack','armaca','armacv','corack','coraca','coracv','legack','legaca','legacv'}for au,al in ipairs(bQ)do local ao=ad[al]if ao then local av=al:sub(1,3)local bG=av=='leg'and'legadveconvt3'or av..'mmkrt3'ak(al,bG..'_200')local bK=av..'afust3'ak(al,bK..'_200')end end end;do local ax,ba=UnitDefs or{},a5;if ax['armvulc']then ax.epic_ragnarok=ba(ax['armvulc'],{name='Epic Ragnarok',description='Beam supergun deletes distant heavies by Altwaal',buildtime=920000,maxthisunit=80,health=140000,footprintx=6,footprintz=6,metalcost=180000,energycost=2600000,energystorage=18000,icontype="armvulc",customparams={i18n_en_humanname='Epic Ragnarok',i18n_en_tooltip='Ultimate Rapid-Fire Laser Beams Blaster by Altwaal',techlevel=4},weapondefs={apocalypse_plasma_cannon={collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,name='Apocalypse Plasma Cannon',weapontype='BeamLaser',rgbcolor='1.0 0.2 0.1',camerashake=0,reloadtime=1,accuracy=10,areaofeffect=160,range=3080,energypershot=42000,turret=true,soundstart='lrpcshot3',soundhit='rflrpcexplo',soundhitvolume=40,size=8,impulsefactor=1.3,weaponvelocity=3100,thickness=12,laserflaresize=8,texture3="largebeam",tilelength=150,tolerance=10000,beamtime=0.12,corethickness=0.4,explosiongenerator='custom:tachyonshot',craterboost=0.15,cratermult=0.15,edgeeffectiveness=0.25,impactonly=1,noselfdamage=true,soundtrigger=1,lightintensity=0.05,lightradius=60,damage={default=22000,shields=6000,subs=2657},allowNonBlockingAim=true}},weapons={[1]={def='apocalypse_plasma_cannon'}}})local bn={'armaca','armack','armacsub','armacv','armt3airaide','armt3aide'}local function bR(bS,am)if not ax[am]then return end;for aq=1,#bS do local ao=ax[bS[aq]]if ao then local bT=ao.buildoptions or{}ao.buildoptions=bT;local bU=false;for az=1,#bT do if bT[az]==am then bU=true;break end end;if not bU then bT[#bT+1]=am end end end end;local function bV(bS,am)for aq=1,#bS do local ao=ax[bS[aq]]if ao and ao.buildoptions then local bT=ao.buildoptions;for az=#bT,1,-1 do if bT[az]==am then R(bT,az)end end end end end;bV(bn,'armvulc')bR(bn,'epic_ragnarok')end end;do local ax,ba=UnitDefs or{},a5;if ax['corbuzz']then ax.epic_calamity=ba(ax['corbuzz'],{name='Epic Calamity',description='Huge plasma sieges slow groups by Altwaal',maxthisunit=80,footprintx=6,footprintz=6,buildtime=920000,health=145000,metalcost=165000,energycost=2700000,energystorage=18000,icontype="corbuzz",customparams={i18n_en_humanname='Epic Calamity',i18n_en_tooltip='Ultimate Rapid-Fire Laser Machine Gun by Altwaal',techlevel=4},weapondefs={cataclysm_plasma_howitzer={collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,impactonly=1,name='Cataclysm Plasma Howitzer',weapontype='Cannon',rgbcolor='0.15 0.6 0.5',camerashake=0,reloadtime=0.5,accuracy=10,areaofeffect=220,range=3150,energypershot=22000,turret=true,soundstart='lrpcshot3',soundhit='rflrpcexplo',soundhitvolume=50,size=12,impulsefactor=2.0,weaponvelocity=2500,turnrate=20000,thickness=18,laserflaresize=8,texture3="largebeam",tilelength=200,tolerance=10000,explosiongenerator='custom:tachyonshot',craterboost=0.15,cratermult=0.15,edgeeffectiveness=0.35,lightintensity=0.05,lightradius=60,damage={default=9000,shields=5490,subs=2350},allowNonBlockingAim=true}},weapons={[1]={def='cataclysm_plasma_howitzer'}}})local bq={'coraca','corack','coracsub','coracv','cort3airaide','cort3aide'}local function bR(bS,am)if not ax[am]then return end;for aq=1,#bS do local ao=ax[bS[aq]]if ao then local bT=ao.buildoptions or{}ao.buildoptions=bT;local bU=false;for az=1,#bT do if bT[az]==am then bU=true;break end end;if not bU then bT[#bT+1]=am end end end end;local function bV(bS,am)for aq=1,#bS do local ao=ax[bS[aq]]if ao and ao.buildoptions then local bT=ao.buildoptions;for az=#bT,1,-1 do if bT[az]==am then R(bT,az)end end end end end;bV(bq,'corbuzz')bR(bq,'epic_calamity')end end;do local ax,ba=UnitDefs or{},a5;if ax['legstarfall']then ax.epic_starfall=ba(ax['legstarfall'],{name='Epic Starfall',description='Rapid-fire Ion Plasma by Altwaal',buildtime=920000,health=145000,metalcost=180000,energycost=3400000,maxthisunit=80,collisionvolumescales='61 128 61',footprintx=6,footprintz=6,customparams={i18n_en_humanname='Epic Starfall',i18n_en_tooltip='Rapid-fire Ion Plasma by Altwaal',techlevel=4,modelradius=150},weapondefs={starfire={accuracy=10,areaofeffect=256,collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,avoidground=false,burst=61,burstrate=0.10,sprayangle=20,highTrajectory=1,cegtaj="starfire",craterboost=0.1,cratermult=0.1,edgeeffectiveness=0.95,energypershot=36000,fireTolerance=364,tolerance=364,explosiongenerator="custom:starfire-explosion",gravityaffected="true",impulsefactor=0.5,name="Very Long-Range High-Trajectory 63-Salvo Plasma Launcher",noselfdamage=true,range=3150,reloadtime=8,rgbcolor="0.7 0.7 1.0",soundhit="rflrpcexplo",soundhitwet="splshbig",soundstart="lrpcshot",soundhitvolume=36,turret=true,weapontimer=14,weapontype="Cannon",weaponvelocity=650,windup=5,damage={default=2200,shields=740,subs=220}}},weapons={[1]={def='starfire',onlytargetcategory='SURFACE',badtargetcategory='VTOL'}}})local bW={'legaca','legack','legacsub','legacv','legt3airaide','legt3aide'}local function bR(bS,am)if not ax[am]then return end;for aq=1,#bS do local ao=ax[bS[aq]]if ao then local bT=ao.buildoptions or{}ao.buildoptions=bT;local bU=false;for az=1,#bT do if bT[az]==am then bU=true;break end end;if not bU then bT[#bT+1]=am end end end end;local function bV(bS,am)for aq=1,#bS do local ao=ax[bS[aq]]if ao and ao.buildoptions then local bT=ao.buildoptions;for az=#bT,1,-1 do if bT[az]==am then R(bT,az)end end end end end;bV(bW,'legstarfall')bR(bW,'epic_starfall')end end;do local ax,ba=UnitDefs or{},a5;if ax['legbastion']then ax.epic_bastion=ba(ax['legbastion'],{name='Epic Bastion',description='Heat ray tower melts swarms by Altwaal',buildtime=150000,footprintx=6,footprintz=6,health=70000,metalcost=26000,energycost=860000,energystorage=6000,sightdistance=1200,radardistance=1740,paralyzemultiplier=0.4,customparams={i18n_en_humanname='Epic Bastion',i18n_en_tooltip='Sweeping heat ray; place on approach lanes to clear waves by Altwaal',techlevel=3},weapondefs={dmaw={weapontype="BeamLaser",damage={default=750,vtol=75},range=1450,rgbcolor="0.65 0.2 0.05",rgbcolor2="0.6 0.4 0.2",lightcolor='0.55 0.25 0.08',lightintensity=0.01,lightradius=16,explosiongenerator="custom:heatray-huge",energypershot=12000,reloadtime=4,beamtime=0.1,turret=true,weaponvelocity=1500,thickness=5.5,areaofeffect=120,edgeeffectiveness=0.45,name="Epic Bastion Ray",collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,impactonly=1,laserflaresize=9,corethickness=0.4,soundstart="heatray3",soundstartvolume=38,soundhitdry="",soundhitwet="sizzle",soundtrigger=1,firetolerance=300,noselfdamage=true,predictboost=0.3,proximitypriority=1,impulsefactor=0,camerashake=0,craterareaofeffect=0,craterboost=0.1,cratermult=0.1,customparams={sweepfire=4},tracks=false}},weapons={[1]={def='dmaw',fastautoretargeting=true}}})local bX={'legaca','legack','legacsub','legacv','legt3airaide','legt3aide'}local function bR(bS,am)if not ax[am]then return end;for aq=1,#bS do local ao=ax[bS[aq]]if ao then local bT=ao.buildoptions or{}ao.buildoptions=bT;local bU=false;for az=1,#bT do if bT[az]==am then bU=true;break end end;if not bU then bT[#bT+1]=am end end end end;for aq=3,10 do bX[#bX+1]='legcomlvl'..aq end;bR(bX,'epic_bastion')end end;do local bb,aC=UnitDefs or{},a5;local bc=bb.leggatet3;if bc then local function ay(ab)local aD={}for a8,a9 in pairs(ab)do aD[a8]=type(a9)=='table'and ay(a9)or a9 end;return aD end;local function aL(a9,aD)if a9 then return C(a9*aD)end end;local aJ=ay(bc)aJ.name='Epic Elysium'aJ.description='Ultimate shield hub. Projects an impenetrable energy barrier.'aJ.buildtime=aL(bc.buildtime,1.7)aJ.health=aL(bc.health,2.5)aJ.metalcost=aL(bc.metalcost,1.7)aJ.energycost=aL(bc.energycost,1.7)aJ.energystorage=aL(bc.energystorage,1.25)aJ.footprintx=6;aJ.footprintz=6;aJ.icontype='leggatet3'local aH=(bc.weapondefs or{}).repulsor or{}local bY=ay(aH)bY.name='Epic Shield'bY.weapontype='Shield'local bZ=ay(aH.shield or{})bZ.power=aL(bZ.power,2.5)bZ.powerregen=aL(bZ.powerregen,4.5)bZ.powerregenenergy=aL(bZ.powerregenenergy,1.9)bZ.radius=aL(bZ.radius,1.3)bZ.startingpower=aL(bZ.startingpower,1.7)bY.shield=bZ;bY.range=aL(bY.range,1.3)aJ.weapondefs={epic_shield=bY}aJ.weapons={{def='epic_shield'}}aJ.customparams=aC(ay(bc.customparams or{}),{i18n_en_humanname='Epic Elysium',i18n_en_tooltip='Massive shield generator',techlevel=4,shield_power=bZ.power,shield_radius=bZ.radius})bb.epic_elysium=aJ;local b_={'legaca','legack','legacsub','legacv','legt3aide','legt3airaide'}local function bR(bS,am)if not bb[am]then return end;for aq=1,#bS do local ao=bb[bS[aq]]if ao then local bT=ao.buildoptions or{}ao.buildoptions=bT;local bU=false;for az=1,#bT do if bT[az]==am then bU=true;break end end;if not bU then bT[#bT+1]=am end end end end;for aq=3,10 do Q(b_,'legcomlvl'..aq)end;bR(b_,'epic_elysium')end end;do local ax,ba=UnitDefs or{},a5;if ax['legapopupdef']then ax.epic_fortress=ba(ax['legapopupdef'],{name='Epic Fortress',description='EMP proof Swarm Destroyer by Pyrem',buildtime=300000,health=60000,metalcost=25200,energycost=315000,sightdistance=1500,customparams={i18n_en_humanname='Epic Fortress',i18n_en_tooltip='EMP proof Swarm Destroyer by Pyrem',techlevel=3,paralyzemultiplier=0.0},weapondefs={epic_riot_devastator={name='Epic Riot Devastator',weapontype='Cannon',collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,damage={default=4900},accuracy=10,areaofeffect=164,areaofeffect=220,edgeeffectiveness=0.50,range=1300,reloadtime=1.6,energypershot=2400,turret=true,weaponvelocity=900,camerashake=0,explosiongenerator='custom:genericshellexplosion-medium',rgbcolor='1.0 0.3 0.5',size=10,soundhitvolume=22,soundstartvolume=18.0,impulsefactor=3.2,craterboost=0.25,cratermult=0.25,noselfdamage=true,impactonly=true,burnblow=true,proximitypriority=5},epic_minigun={accuracy=2,areaofeffect=32,collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,burst=6,burstrate=0.066,burnblow=false,craterareaofeffect=0,craterboost=0,cratermult=0,duration=0.05,edgeeffectiveness=0.85,explosiongenerator="custom:plasmahit-sparkonly",falloffrate=0.15,firestarter=5,impulsefactor=2.0,intensity=1.2,name="Epic Rotary Cannons",noselfdamage=true,impactonly=true,ownerExpAccWeight=4.0,proximitypriority=6,range=1000,reloadtime=0.4,rgbcolor="1 0.4 0.6",soundhit="bimpact3",soundhitwet="splshbig",soundstart="mgun6heavy",soundstartvolume=6.5,soundtrigger=true,sprayangle=450,texture1="shot",texture2="empty",thickness=4.5,tolerance=3000,turret=true,weapontype="LaserCannon",weaponvelocity=1300,damage={default=60,vtol=60}}},weapons={[1]={def='epic_riot_devastator',onlytargetcategory='SURFACE'},[2]={def='epic_minigun',onlytargetcategory='SURFACE'},[3]={def='epic_minigun',onlytargetcategory='SURFACE'}}})local bp={'legaca','legack','legacsub','legacv','legt3airaide','legt3aide'}local function bR(bS,am)if not ax[am]then return end;for aq=1,#bS do local ao=ax[bS[aq]]if ao then local bT=ao.buildoptions or{}ao.buildoptions=bT;local bU=false;for az=1,#bT do if bT[az]==am then bU=true;break end end;if not bU then bT[#bT+1]=am end end end end;for aq=3,10 do bp[#bp+1]='legcomlvl'..aq end;bR(bp,'epic_fortress')end end;do local UnitDefs,ax=UnitDefs or{},'armbotrail'local ba={armt3={maxthisunit=20,footprintx=6,footprintz=6,customparams={i18n_en_humanname='Armada T3 Launcher',i18n_en_tooltip='Launches Titan, Thor & Ratte by Pyrem'},weapondefs={arm_botrail={stockpiletime=8,range=7550,metalpershot=13000,energypershot=180000,reloadtime=2,customparams={stockpilelimit=50,spawns_name='armbanth armthor armrattet4',spawns_mode='random'}}}},cort3={maxthisunit=20,footprintx=6,footprintz=6,customparams={i18n_en_humanname='Cortex T3 Launcher',i18n_en_tooltip='Launches Tzar, Behemoth & Juggernaut by Pyrem'},weapondefs={arm_botrail={stockpiletime=8,range=7550,metalpershot=20000,energypershot=180000,reloadtime=2,customparams={stockpilelimit=50,spawns_name='corjugg corkorg corgolt4',spawns_mode='random'}}}},legt3={maxthisunit=20,footprintx=6,footprintz=6,customparams={i18n_en_humanname='Legion T3 Launcher',i18n_en_tooltip='Launches Sols (2 Types) by Pyrem'},weapondefs={arm_botrail={stockpiletime=8,range=7550,metalpershot=16000,energypershot=180000,reloadtime=2,customparams={stockpilelimit=50,spawns_name='leegmech legeheatraymech legeheatraymech_old',spawns_mode='random'}}}}}local function ak(al,am)local ao=UnitDefs[al]local ap=am and UnitDefs[am]if not ao or not ap then return end;ao.buildoptions=ao.buildoptions or{}for aq=1,#ao.buildoptions do if ao.buildoptions[aq]==am then return end end;ao.buildoptions[#ao.buildoptions+1]=am end;if UnitDefs.cormandot4 then for ay,bb in pairs(ba)do local bc=ax..'_'..ay;if UnitDefs[ax]and not UnitDefs[bc]then UnitDefs[bc]=a5(UnitDefs[ax],bb)ak('cormandot4',bc)end end end end;do local c0={raptor_air_scout_basic_t2_v1={customparams={raptorcustomsquad=true,raptorsquadunitsamount=25,raptorsquadminanger=20,raptorsquadmaxanger=26,raptorsquadweight=10,raptorsquadrarity="basic",raptorsquadbehavior="raider",raptorsquadbehaviordistance=500,raptorsquadbehaviorchance=0.75}},raptor_hive_assault_basic={customparams={raptorcustomsquad=true,raptorsquadunitsamount=25,raptorsquadminanger=0,raptorsquadmaxanger=40,raptorsquadweight=1,raptorsquadrarity="basic",raptorsquadbehavior="raider",raptorsquadbehaviordistance=500,raptorsquadbehaviorchance=0.75}},raptor_land_swarmer_basic_t3_v1={customparams={raptorcustomsquad=true,raptorsquadunitsamount=25,raptorsquadminanger=0,raptorsquadmaxanger=40,raptorsquadweight=2,raptorsquadrarity="basic",raptorsquadbehavior="raider",raptorsquadbehaviordistance=500,raptorsquadbehaviorchance=0.75}},raptor_evolved_motort4={customparams={raptorcustomsquad=true,raptorsquadunitsamount=12,raptorsquadminanger=50,raptorsquadmaxanger=300,raptorsquadweight=3,raptorsquadrarity="special",raptorsquadbehavior="artillery",raptorsquadbehaviordistance=2500,raptorsquadbehaviorchance=0.75}},raptor_hive_assault_heavy={customparams={raptorcustomsquad=true,raptorsquadunitsamount=25,raptorsquadminanger=55,raptorsquadmaxanger=70,raptorsquadweight=1,raptorsquadrarity="basic",raptorsquadbehavior="berserk",raptorsquadbehaviordistance=500,raptorsquadbehaviorchance=0.75}},raptor_hive_assault_superheavy={customparams={raptorcustomsquad=true,raptorsquadunitsamount=25,raptorsquadminanger=80,raptorsquadmaxanger=85,raptorsquadweight=1,raptorsquadrarity="basic",raptorsquadbehavior="berserk",raptorsquadbehaviordistance=500,raptorsquadbehaviorchance=0.75}},raptor_air_kamikaze_basic_t2_v1={customparams={raptorcustomsquad=true,raptorsquadunitsamount=55,raptorsquadminanger=100,raptorsquadmaxanger=105,raptorsquadweight=2,raptorsquadrarity="basic",raptorsquadbehavior="berserk",raptorsquadbehaviordistance=500,raptorsquadbehaviorchance=0.75}},raptor_matriarch_fire={customparams={raptorcustomsquad=true,raptorsquadunitsamount=30,raptorsquadminanger=105,raptorsquadmaxanger=135,raptorsquadweight=3,raptorsquadrarity="special",raptorsquadbehavior="berserk",raptorsquadbehaviordistance=500,raptorsquadbehaviorchance=0.75}},raptor_matriarch_basic={customparams={raptorcustomsquad=true,raptorsquadunitsamount=30,raptorsquadminanger=105,raptorsquadmaxanger=135,raptorsquadweight=3,raptorsquadrarity="special",raptorsquadbehavior="berserk",raptorsquadbehaviordistance=500,raptorsquadbehaviorchance=0.75}},raptor_matriarch_acid={customparams={raptorcustomsquad=true,raptorsquadunitsamount=30,raptorsquadminanger=105,raptorsquadmaxanger=135,raptorsquadweight=3,raptorsquadrarity="special",raptorsquadbehavior="berserk",raptorsquadbehaviordistance=500,raptorsquadbehaviorchance=0.75}},raptor_matriarch_electric={customparams={raptorcustomsquad=true,raptorsquadunitsamount=30,raptorsquadminanger=105,raptorsquadmaxanger=135,raptorsquadweight=3,raptorsquadrarity="special",raptorsquadbehavior="berserk",raptorsquadbehaviordistance=500,raptorsquadbehaviorchance=0.75},weapons={[5]={def=""}}},raptor_queen_veryeasy={selfdestructas="customfusionexplo",explodeas="customfusionexplo",maxthisunit=3,customparams={raptorcustomsquad=true,i18n_en_humanname="Queen Degenerative",i18n_en_tooltip="SHES A BIG ONE",raptorsquadunitsamount=2,raptorsquadminanger=70,raptorsquadmaxanger=150,raptorsquadweight=2,raptorsquadrarity="special",raptorsquadbehavior="berserk",raptorsquadbehaviordistance=500,raptorsquadbehaviorchance=0.75},weapondefs={melee={damage={default=5000}},yellow_missile={damage={default=1,vtol=500}},goo={range=500,damage={default=1200}}}},corcomlvl4={weapondefs={disintegratorxl={damage={commanders=0,default=99999,scavboss=1000,raptorqueen=5000}}}}}if UnitDefs and c0 then for bz,as in pairs(c0)do if UnitDefs[bz]then aa(UnitDefs[bz],as)else UnitDefs[bz]=as end end end end;do local ax,ba,ay,bb,bc,bd=UnitDefs or{},a5,P,'raptor_matriarch_basic','customfusionexplo',Spring;local aA,be=1.3,1.3;if ax[bb]and ax['raptor_queen_epic']then if ax[bb].health then be=ax[bb].health/60000 end;if ax['raptor_queen_epic'].health then aA=ax['raptor_queen_epic'].health/1250000 end end;local aq=1;if bd.Utilities.Gametype.IsRaptors()then aq=(#bd.GetTeamList()-2)/12 end;local az=bd.GetModOptions().raptor_spawncountmult or 3;local aq=aq*az/3;local function az(ax)return E(1,C(ax*aq))end;local aq={70,85,90,105,110,125}local a8=E(1,bd.GetModOptions().raptor_queentimemult or 1.3)local aB,aC=aq[1],aq[#aq]local aD=a8*aq[#aq]/1.3;local aC=(aD-aB)/(aC-aB)for ax=2,#aq do aq[ax]=D(aB+(aq[ax]-aB)*aC)end;local bd=bd.GetModOptions().raptor_queen_count or 1;local aB=1;aB=F(10,aA/1.3*0.9)local aA=20;local aC=10*1.06^E(0,F(bd,aA)-8)local aA=E(0,bd-aA)local aA=aC+aA;local aA=C(aB*aA)local aA=a8*100+aA;local bd=E(3,az(D((21*bd+36)/19)))local function a8(ay,bb,bc)if ax[ay]and not ax[bb]then ax[bb]=ba(ax[ay],bc or{})end end;local c1=0;if ax[bb]and ax[bb].health then c1=ax[bb].health end;a8('raptor_queen_veryeasy','raptor_miniq_a',{name='Queenling Prima',icontype='raptor_queen_veryeasy',health=c1*5,customparams={i18n_en_humanname='Queenling Prima',i18n_en_tooltip='Majestic and bold, ruler of the hunt.'}})a8('raptor_queen_easy','raptor_miniq_b',{name='Queenling Secunda',icontype='raptor_queen_easy',health=c1*6,customparams={i18n_en_humanname='Queenling Secunda',i18n_en_tooltip='Swift and sharp, a noble among raptors.'}})a8('raptor_queen_normal','raptor_miniq_c',{name='Queenling Tertia',icontype='raptor_queen_normal',health=c1*7,customparams={i18n_en_humanname='Queenling Tertia',i18n_en_tooltip='Refined tastes. Likes her prey rare.'}})if ax.raptor_miniq_b and ax['raptor_matriarch_acid']then ax.raptor_miniq_b.weapondefs.acidgoo=ay(ax['raptor_matriarch_acid'].weapondefs.acidgoo)end;if ax.raptor_miniq_c and ax['raptor_matriarch_electric']then ax.raptor_miniq_c.weapondefs.empgoo=ay(ax['raptor_matriarch_electric'].weapondefs.goo)end;for ax,ax in ipairs{{'raptor_matriarch_basic','raptor_mama_ba','Matrona','Claws charged with vengeance.'},{'raptor_matriarch_fire','raptor_mama_fi','Pyro Matrona','A firestorm of maternal wrath.'},{'raptor_matriarch_electric','raptor_mama_el','Paralyzing Matrona','Crackling with rage, ready to strike.'},{'raptor_matriarch_acid','raptor_mama_ac','Acid Matrona','Acid-fueled, melting everything in sight.'}}do a8(ax[1],ax[2],{name=ax[3],icontype=ax[1],health=c1*1.5,customparams={i18n_en_humanname=ax[3],i18n_en_tooltip=ax[4]}})end;a8('critter_penguinking','raptor_consort',{name='Raptor Consort',icontype='corkorg',health=c1*4,mass=100000,nochasecategory="MOBILE VTOL OBJECT",sonarstealth=false,stealth=false,speed=67.5,customparams={i18n_en_humanname='Raptor Consort',i18n_en_tooltip='Sneaky powerful little terror.'}})if ax.raptor_consort and ax['raptor_queen_epic']then ax.raptor_consort.weapondefs.goo=ay(ax['raptor_queen_epic'].weapondefs.goo)end;a8('raptor_consort','raptor_doombringer',{name='Doombringer',icontype='armafust3',health=c1*12,speed=50,customparams={i18n_en_humanname='Doombringer',i18n_en_tooltip=[[Your time is up. The Queens called for backup.]]}})local function ay(ax,ba,ay,bb,bc,bd)return{raptorcustomsquad=true,raptorsquadunitsamount=bc or 1,raptorsquadminanger=ax,raptorsquadmaxanger=ba,raptorsquadweight=bd or 5,raptorsquadrarity=bb or'basic',raptorsquadbehavior=ay,raptorsquadbehaviordistance=500,raptorsquadbehaviorchance=0.75}end;local bb={selfdestructas=bc,explodeas=bc,weapondefs={yellow_missile={damage={default=1,vtol=1000}}}}for ba,ay in pairs{raptor_miniq_a=ba(bb,{maxthisunit=az(2),customparams=ay(aq[1],aq[2],'berserk'),weapondefs={goo={damage={default=750}},melee={damage={default=4000}}}}),raptor_miniq_b=ba(bb,{maxthisunit=az(3),customparams=ay(aq[3],aq[4],'berserk'),weapondefs={acidgoo={burst=8,reloadtime=10,sprayangle=4096,damage={default=1500,shields=1500}},melee={damage={default=5000}}},weapons={[1]={def="MELEE",maindir="0 0 1",maxangledif=155},[2]={onlytargetcategory="VTOL",def="yellow_missile"},[3]={onlytargetcategory="VTOL",def="yellow_missile"},[4]={onlytargetcategory="VTOL",def="yellow_missile"},[5]={def="acidgoo",maindir="0 0 1",maxangledif=180}}}),raptor_miniq_c=ba(bb,{maxthisunit=az(4),customparams=ay(aq[5],aq[6],'berserk'),weapondefs={empgoo={burst=10,reloadtime=10,sprayangle=4096,damage={default=2000,shields=2000}},melee={damage={default=6000}}},weapons={[1]={def="MELEE",maindir="0 0 1",maxangledif=155},[2]={onlytargetcategory="VTOL",def="yellow_missile"},[3]={onlytargetcategory="VTOL",def="yellow_missile"},[4]={onlytargetcategory="VTOL",def="yellow_missile"},[5]={def="empgoo",maindir="0 0 1",maxangledif=180}}}),raptor_consort={explodeas='raptor_empdeath_big',maxthisunit=az(6),customparams=ay(aq[2],1000,'berserk'),weapondefs={eyelaser={name='Angry Eyes',reloadtime=3,rgbcolor='1 0 0.3',range=500,damage={default=6000,commanders=6000}},goo={name='Snowball Barrage',soundstart='penbray2',soundStartVolume=2,cegtag="blob_trail_blue",burst=8,sprayangle=2048,weaponvelocity=600,reloadtime=4,range=1000,hightrajectory=1,rgbcolor="0.7 0.85 1.0",damage={default=1000}}},weapons={[1]={def="eyelaser",badtargetcategory="VTOL OBJECT"},[2]={def='goo',maindir='0 0 1',maxangledif=180,badtargetcategory="VTOL OBJECT"}}},raptor_doombringer={explodeas="ScavComBossExplo",maxthisunit=bd,customparams=ay(aA,1000,'berserk',nil,1,99),weapondefs={eyelaser={name='Eyes of Doom',reloadtime=3,rgbcolor='0.3 1 0',range=500,damage={default=48000,commanders=24000}},goo={name='Amber Hailstorm',soundstart='penbray1',soundStartVolume=2,cegtag="blob_trail_red",burst=15,sprayangle=3072,weaponvelocity=600,reloadtime=5,rgbcolor="0.7 0.85 1.0",hightrajectory=1,damage={default=5000}}},weapons={[1]={def="eyelaser",badtargetcategory="VTOL OBJECT"},[2]={def='goo',maindir='0 0 1',maxangledif=180,badtargetcategory="VTOL OBJECT"}}},raptor_mama_ba={maxthisunit=az(4),customparams=ay(55,aq[3]-1,'berserk'),weapondefs={goo={damage={default=750}},melee={damage={default=750}}}},raptor_mama_fi={explodeas='raptor_empdeath_big',maxthisunit=az(4),customparams=ay(55,aq[3]-1,'berserk'),weapondefs={flamethrowerspike={damage={default=80}},flamethrowermain={damage={default=160}}}},raptor_mama_el={maxthisunit=az(4),customparams=ay(65,1000,'berserk')},raptor_mama_ac={maxthisunit=az(4),customparams=ay(60,1000,'berserk'),weapondefs={melee={damage={default=750}}}},raptor_land_assault_basic_t4_v2={maxthisunit=az(8),customparams=ay(33,50,'raider')},raptor_land_assault_basic_t4_v1={maxthisunit=az(12),customparams=ay(51,64,'raider','basic',2)}}do ax[ba]=ax[ba]or{}aa(ax[ba],ay,true)end;local ax={raptor_mama_ba=36000,raptor_mama_fi=36000,raptor_mama_el=36000,raptor_mama_ac=36000,raptor_consort=45000,raptor_doombringer=90000}local ba=UnitDef_Post;function UnitDef_Post(ay,bb)if ba then ba(ay,bb)end;local ba=1;if be>1.3 then ba=be/1.3 end;for ax,ay in pairs(ax)do if UnitDefs[ax]then local ba=D(ay*ba)UnitDefs[ax].metalcost=ba end end end end;for bz,c2 in pairs(UnitDefs)do if L(bz,'comlvl%d')or L(bz,'armcom')or L(bz,'corcom')or L(bz,'legcom')then c2.customparams=c2.customparams or{}c2.customparams.inheritxpratemultiplier=0.5;c2.customparams.childreninheritxp='TURRET MOBILEBUILT'c2.customparams.parentsinheritxp='TURRET MOBILEBUILT'end end;do local UnitDefs=UnitDefs or{}if UnitDefs.armbrtha then aa(UnitDefs.armbrtha,{health=13000,weapondefs={ARMBRTHA_MAIN={damage={commanders=480,default=33000},areaofeffect=60,energypershot=8000,range=2400,reloadtime=9,turnrate=20000}}})end;if UnitDefs.corint then aa(UnitDefs.corint,{health=13000,weapondefs={CORINT_MAIN={damage={commanders=480,default=85000},areaofeffect=230,edgeeffectiveness=0.6,energypershot=15000,range=2700,reloadtime=18}}})end;if UnitDefs.leglrpc then aa(UnitDefs.leglrpc,{health=13000,weapondefs={LEGLRPC_MAIN={damage={commanders=480,default=4500},energypershot=2000,range=2000,reloadtime=2,turnrate=30000}}})end end;do local c0={cortron={energycost=42000,metalcost=3600,buildtime=110000,health=12000,weapondefs={cortron_weapon={energypershot=51000,metalpershot=600,range=4050,damage={default=9000}}}},corfort={repairable=true},armfort={repairable=true},legforti={repairable=true},armgate={explodeas='empblast',selfdestructas='empblast'},corgate={explodeas='empblast',selfdestructas='empblast'},legdeflector={explodeas='empblast',selfdestructas='empblast'},corsat={sightdistance=3100,radardistance=4080,cruisealtitude=3300,energyupkeep=1250,category="OBJECT"},armsat={sightdistance=3100,radardistance=4080,cruisealtitude=3300,energyupkeep=1250,category="OBJECT"},legstarfall={weapondefs={starfire={energypershot=270000}}},armflak={airsightdistance=1350,energycost=30000,metalcost=1500,health=4000,weapondefs={armflak_gun={collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,areaofeffect=150,range=1150,reloadtime=0.475,weaponvelocity=2400,intensity=0.18}}},corflak={airsightdistance=1350,energycost=30000,metalcost=1500,health=4000,weapondefs={armflak_gun={collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,areaofeffect=200,range=1350,reloadtime=0.56,weaponvelocity=2100,intensity=0.18}}},legflak={footprintx=4,footprintz=4,airsightdistance=1350,energycost=35000,metalcost=2100,health=6000,weapondefs={legflak_gun={collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,areaofeffect=100,burst=3,range=1050,intensity=0.18}}},armmercury={airsightdistance=2200,weapondefs={arm_advsam={areaofeffect=500,energypershot=2000,explosiongenerator='custom:flak',flighttime=1.5,metalpershot=6,name='Mid-range, rapid-fire g2a guided missile launcher',range=2500,reloadtime=1.2,smoketrail=false,startvelocity=1500,weaponacceleration=1000,weaponvelocity=4000}}},corscreamer={airsightdistance=2800,weapondefs={cor_advsam={areaofeffect=800,energypershot=2000,explosiongenerator='custom:flak',flighttime=1,metalpershot=10,name='Long-range g2a guided heavy flak missile launcher',range=2800,reloadtime=1.8,smoketrail=false,startvelocity=4000,weaponacceleration=1000,weaponvelocity=8000}}},armassistdrone={buildoptions={[31]='armclaw'}},corassistdrone={buildoptions={[32]='cormaw'}},legassistdrone={buildoptions={[31]='legdtf',[32]='legdtl',[33]='legdtr'}},legfortt4={explodeas="fusionExplosionSelfd",selfdestructas="fusionExplosionSelfd"},legfort={explodeas="empblast",selfdestructas="empblast"},raptor_hive={weapondefs={antiground={burst=5,burstrate=0.01,cegtag='arty-heavy-purple',explosiongenerator='custom:dirt',model='Raptors/s_raptor_white.s3o',range=1600,reloadtime=5,rgbcolor='0.5 0 1',soundhit='smallraptorattack',soundstart='bugarty',sprayangle=256,turret=true,stockpiletime=12,proximitypriority=nil,damage={default=1,shields=100},customparams={spawns_count=15,spawns_expire=11,spawns_mode='random',spawns_name='raptor_land_swarmer_basic_t1_v1 raptor_land_swarmer_basic_t1_v1 raptor_land_swarmer_basic_t1_v1 ',spawns_surface='LAND SEA',stockpilelimit=10}}}},armapt3={buildoptions={[58]='armsat'}},corapt3={buildoptions={[58]='corsat'}},legapt3={buildoptions={[58]='corsat'}},armlwall={energycost=25000,metalcost=1300,weapondefs={lightning={energypershot=200,range=430}}},armclaw={collisionvolumeoffsets='0 -2 0',collisionvolumescales='30 51 30',collisionvolumetype='Ell',usepiececollisionvolumes=0,weapondefs={dclaw={energypershot=60}}},legdtl={weapondefs={dclaw={energypershot=60}}},armamd={metalcost=1800,energycost=41000,weapondefs={amd_rocket={coverage=2125,stockpiletime=70}}},corfmd={metalcost=1800,energycost=41000,weapondefs={fmd_rocket={coverage=2125,stockpiletime=70}}},legabm={metalcost=1800,energycost=41000,weapondefs={fmd_rocket={coverage=2125,stockpiletime=70}}},corwint2={metalcost=400},legwint2={metalcost=400},legdtr={buildtime=5250,energycost=5500,metalcost=400,collisionvolumeoffsets='0 -10 0',collisionvolumescales='39 88 39',collisionvolumetype='Ell',usepiececollisionvolumes=0,weapondefs={corlevlr_weapon={areaofeffect=30,avoidfriendly=true,collidefriendly=false,cegtag='railgun',range=650,energypershot=75,explosiongenerator='custom:plasmahit-sparkonly',rgbcolor='0.34 0.64 0.94',soundhit='mavgun3',soundhitwet='splshbig',soundstart='lancefire',weaponvelocity=1300,damage={default=550}}}},armrespawn={blocking=false,canresurrect=true},legnanotcbase={blocking=false,canresurrect=true},correspawn={blocking=false,canresurrect=true},legrwall={collisionvolumeoffsets="0 -3 0",collisionvolumescales="32 50 32",collisionvolumetype="CylY",energycost=21000,metalcost=1400,weapondefs={railgunt2={collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,range=725,reloadtime=3,energypershot=200,damage={default=1500}}},weapons={[1]={def="railgunt2",onlytargetcategory="SURFACE"}}},cormwall={energycost=18000,metalcost=1350,weapondefs={exp_heavyrocket={areaofeffect=70,collidefriendly=0,collidefeature=0,cameraShake=0,energypershot=125,avoidfeature=0,avoidfriendly=0,burst=1,burstrate=0,colormap='0.75 0.73 0.67 0.024   0.37 0.4 0.30 0.021   0.22 0.21 0.14 0.018  0.024 0.014 0.009 0.03   0.0 0.0 0.0 0.008',craterareaofeffect=0,explosiongenerator='custom:burnblack',flamegfxtime=1,flighttime=1.05,name='Raptor Boomer',reloadtime=1.5,rgbcolor='1 0.25 0.1',range=700,size=2,proximitypriority=nil,impactonly=1,trajectoryheight=1,targetmoveerror=0.2,tracks=true,weaponacceleration=660,weaponvelocity=950,damage={default=1050}}}},cormaw={collisionvolumeoffsets='0 -2 0',collisionvolumescales='30 51 30',collisionvolumetype='Ell',usepiececollisionvolumes=false,metalcost=350,energycost=2500,weapondefs={dmaw={collidefriendly=0,collidefeature=0,areaofeffect=80,edgeeffectiveness=0.45,energypershot=50,burst=24,rgbcolor='0.051 0.129 0.871',rgbcolor2='0.57 0.624 1',sizegrowth=0.80,range=450,intensity=0.68,damage={default=28}}}},legdtf={collisionvolumeoffsets='0 -24 0',collisionvolumescales='30 51 30',collisionvolumetype='Ell',metalcost=350,energycost=2750,weapondefs={dmaw={collidefriendly=0,collidefeature=0,areaofeffect=80,edgeeffectiveness=0.45,energypershot=50,burst=24,sizegrowth=2,range=450,intensity=0.38,sprayangle=500,damage={default=30}}}},corhllllt={collisionvolumeoffsets='0 -24 0',collisionvolumescales='30 51 30',metalcost=415,energycost=9500,buildtime=10000,health=2115},corhlt={energycost=5500,metalcost=520,weapondefs={cor_laserh1={range=750,reloadtime=0.95,damage={default=395,vtol=35}}}},armhlt={energycost=5700,metalcost=510,weapondefs={arm_laserh1={range=750,reloadtime=1,damage={default=405,vtol=35}}}},armbrtha={explodeas='fusionExplosion',energycost=500000,metalcost=18500,buildtime=175000,turnrate=16000,health=10450,weapondefs={ARMBRTHA_MAIN={areaofeffect=50,collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,beamtime=2.5,corethickness=0.1,craterareaofeffect=90,craterboost=0,cratermult=0,cameraShake=0,edgeeffectiveness=0.30,energypershot=14000,explosiongenerator='custom:laserhit-large-blue',firestarter=90,impulseboost=0,impulsefactor=0,largebeamlaser=true,laserflaresize=1,impactonly=1,name='Experimental Duction Beam',noselfdamage=true,range=2400,reloadtime=13,rgbcolor='0.4 0.2 0.6',scrollspeed=13,soundhitdry="",soundhitwet="sizzle",soundstart="hackshotxl3",soundtrigger=1,targetmoveerror=0.3,texture3='largebeam',thickness=14,tilelength=150,tolerance=10000,turret=true,turnrate=16000,weapontype='LaserCannon',weaponvelocity=3100,damage={commanders=480,default=34000}}},weapons={[1]={badtargetcategory='VTOL GROUNDSCOUT',def='ARMBRTHA_MAIN',onlytargetcategory='SURFACE'}}},corint={explodeas='fusionExplosion',energycost=505000,metalcost=19500,buildtime=170000,health=12450,footprintx=6,footprintz=6,weapondefs={CORINT_MAIN={areaofeffect=70,collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,beamtime=2.5,corethickness=0.1,craterareaofeffect=90,craterboost=0,cratermult=0,cameraShake=0,edgeeffectiveness=0.30,energypershot=17000,explosiongenerator='custom:laserhit-large-blue',firestarter=90,impulseboost=0,impulsefactor=0,largebeamlaser=true,laserflaresize=1,impactonly=1,name='Mini DeathStar',noselfdamage=true,range=2800,reloadtime=15,rgbcolor='0 1 0',scrollspeed=13,soundhitdry='',soundhitwet='sizzle',soundstart='annigun1',soundtrigger=1,targetmoveerror=0.3,texture3='largebeam',thickness=14,tilelength=150,tolerance=10000,turret=true,turnrate=1600,weapontype='LaserCannon',weaponvelocity=3100,damage={commanders=480,default=50000}}},weapons={[1]={badtargetcategory='VTOL GROUNDSCOUT',def='CORINT_MAIN',onlytargetcategory='SURFACE'}}},leglrpc={explodeas='fusionExplosion',energycost=555000,metalcost=21000,buildtime=150000,health=11000,footprintx=6,footprintz=6,weapondefs={LEGLRPC_MAIN={areaofeffect=70,collidefriendly=0,collidefeature=0,avoidfeature=0,avoidfriendly=0,beamtime=0.5,burst=3,burstrate=0.4,corethickness=0.1,craterareaofeffect=90,craterboost=0,cratermult=0,cameraShake=0,edgeeffectiveness=0.30,energypershot=10000,explosiongenerator='custom:laserhit-large-red',firestarter=90,impactonly=1,impulseboost=0,impulsefactor=0,largebeamlaser=true,laserflaresize=1,name='The Eagle Standard',noselfdamage=true,range=2150,reloadtime=3,rgbcolor='0/1/0.4',scrollspeed=13,soundhitdry='',soundhitwet='sizzle',soundstart='lasrcrw1',soundtrigger=1,targetmoveerror=0.3,texture3='largebeam',thickness=12,tilelength=150,tolerance=10000,turret=true,turnrate=16000,weapontype='LaserCannon',weaponvelocity=3100,damage={commanders=480,default=6000}}},weapons={[1]={badtargetcategory='VTOL GROUNDSCOUT',def='LEGLRPC_MAIN',onlytargetcategory='SURFACE'}}}}if UnitDefs and c0 then for bz,as in pairs(c0)do if UnitDefs[bz]then aa(UnitDefs[bz],as)else UnitDefs[bz]=as end end end end;do local c0={armcom={footprintx=2,footprintz=2,customparams={evolution_target='armcomlvl2',evolution_condition='timer_global',evolution_timer=420},energymake=100,metalmake=10,autoheal=55,health=4500,speed=41,canresurrect=true,buildoptions={'armsolar','armwin','armmstor','armestor','armmex','armmakr','armgate','armlab','armnanotc','armvp','armap','armeyes','armrad','armdrag','armllt','armrl','armdl','armtide','armuwms','armuwes','armuwmex','armfmkr','armsy','armfdrag','armtl','armfrt','armfrad','armhp','armfhp','armgeo','armamex','armbeamer','armjamt','armsy','armrectr','armclaw'},weapondefs={armcomlaser={range=330,rgbcolor='0.7 1 1',soundstart='lasrfir1',damage={default=175}},old_armsnipe_weapon={areaofeffect=32,avoidfeature=true,avoidfriendly=true,collidefeature=true,collidefriendly=false,corethickness=0.75,craterareaofeffect=0,craterboost=0,commandfire=true,cratermult=0,cegtag='railgun',duration=0.12,edgeeffectiveness=0.85,energypershot=400,explosiongenerator='custom:laserhit-large-blue',firestarter=100,impulseboost=0.4,impulsefactor=1,intensity=0.8,name='Long-range rail rifle',range=550,reloadtime=1,rgbcolor='0 1 1',rgbcolor2='0 1 1',soundhit='sniperhit',soundhitwet='sizzle',soundstart='sniper3',soundtrigger=true,stockpile=true,stockpiletime=7,customparams={stockpilelimit=5},texture1='shot',texture2='empty',thickness=4,tolerance=1000,turret=true,weapontype='LaserCannon',weaponvelocity=3000,damage={commanders=100,default=4900}}},weapons={[3]={def='old_armsnipe_weapon',onlytargetcategory='NOTSUB'}}},armcomlvl2={footprintx=2,footprintz=2,autoheal=125,builddistance=200,canresurrect=true,energymake=315,health=8125,speed=57.5,metalmake=30,workertime=1700,buildoptions={'armsolar','armwin','armmstor','armestor','armmex','armmakr','armgate','armlab','armvp','armap','armeyes','armrad','armdrag','armllt','armrl','armdl','armtide','armuwms','armuwes','armuwmex','armfmkr','armsy','armfdrag','armtl','armfrt','armfrad','armhp','armfhp','armadvsol','armgeo','armamex','armlwall','armnanotct2','armclaw','armbeamer','armhlt','armguard','armferret','armcir','armjamt','armjuno','armsy','armrectr'},customparams={evolution_target='armcomlvl3',evolution_condition='timer_global',evolution_timer=1320},weapondefs={armcomlaser={areaofeffect=16,avoidfeature=false,beamtime=0.1,corethickness=0.1,craterareaofeffect=0,craterboost=0,cratermult=0,cylindertargeting=1,edgeeffectiveness=1,explosiongenerator='custom:laserhit-small-red',firestarter=70,impactonly=1,impulseboost=0,impulsefactor=0,laserflaresize=7.7,name='Light close-quarters g2g/g2a laser',noselfdamage=true,range=425,reloadtime=0.7,rgbcolor='0 1 1',soundhitdry='',soundhitwet='sizzle',soundstart='lasrfir1',soundtrigger=1,targetmoveerror=0.05,thickness=4,tolerance=10000,turret=true,weapontype='BeamLaser',weaponvelocity=900,damage={default=950,VTOL=150}},old_armsnipe_weapon={areaofeffect=42,avoidfeature=true,avoidfriendly=true,collidefeature=true,collidefriendly=false,corethickness=0.75,craterareaofeffect=0,craterboost=0,commandfire=true,cratermult=0,cegtag='railgun',duration=0.12,edgeeffectiveness=0.85,energypershot=700,explosiongenerator='custom:laserhit-large-blue',firestarter=100,impulseboost=0.4,impulsefactor=1,intensity=1,name='Long-range g2g armor-piercing rifle',range=700,reloadtime=1,rgbcolor='0.2 0.1 1',rgbcolor2='0.2 0.1 1',soundhit='sniperhit',soundhitwet='sizzle',soundstart='sniper3',soundtrigger=true,stockpile=true,stockpiletime=6,customparams={stockpilelimit=10},texture1='shot',texture2='empty',thickness=4,tolerance=1000,turret=true,weapontype='LaserCannon',weaponvelocity=3000,damage={commanders=10,default=11000}}},weapons={[1]={def='armcomlaser',onlytargetcategory='NOTSUB',fastautoretargeting=true},[3]={def='old_armsnipe_weapon',onlytargetcategory='NOTSUB'}}},armcomlvl3={footprintx=2,footprintz=2,autoheal=600,builddistance=350,canresurrect=true,energymake=2712,health=16000,speed=71.5,metalmake=62,workertime=3400,buildoptions={'armanni','armpb','armamb','armmoho','armuwmme','armflak','armmercury','armgate','armsd','armfort','armtarg','armarad','armamd','armveil','armuwadvms','armuwadves','armmmkr','armuwmmm','armavp','armaap','armalab','armfflak','armatl','armkraken','armbrtha','armannit3','armlwall','armgatet3','armannit4','armnanotct2','armnanotct3'},customparams={evolution_target='armcomlvl4',evolution_condition='timer_global',evolution_timer=1740},weapondefs={old_armsnipe_weapon={areaofeffect=64,avoidfeature=true,avoidfriendly=true,collidefeature=true,collidefriendly=false,corethickness=0.75,craterareaofeffect=0,craterboost=0,commandfire=true,cratermult=0,cegtag='railgun',duration=0.12,edgeeffectiveness=1,energypershot=2000,explosiongenerator='custom:laserhit-large-blue',firestarter=100,impulseboost=0.4,impulsefactor=1,intensity=1.4,name='Long-range g2g armor-piercing rifle',range=1250,reloadtime=0.5,rgbcolor='0.4 0.1 0.7',rgbcolor2='0.4 0.1 0.7',soundhit='sniperhit',soundhitwet='sizzle',soundstart='sniper3',soundtrigger=true,stockpile=true,stockpiletime=3,customparams={stockpilelimit=10},texture1='shot',texture2='empty',thickness=6,tolerance=1000,turret=true,weapontype='LaserCannon',weaponvelocity=3000,damage={commanders=10,default=35000}},armcomlaser={areaofeffect=12,avoidfeature=false,beamtime=0.1,corethickness=0.1,craterareaofeffect=0,craterboost=0,cratermult=0,cylindertargeting=1,edgeeffectiveness=1,explosiongenerator='custom:laserhit-small-red',firestarter=70,impactonly=1,impulseboost=0,impulsefactor=0,laserflaresize=7.7,name='Light close-quarters g2g/g2a laser',noselfdamage=true,range=500,reloadtime=0.6,rgbcolor='0.1 0 1',soundhitdry='',soundhitwet='sizzle',soundstart='lasrcrw2',soundtrigger=1,targetmoveerror=0.05,thickness=6,tolerance=10000,turret=true,weapontype='BeamLaser',weaponvelocity=900,damage={default=1450,VTOL=180}}},weapons={[5]={badtargetcategory='MOBILE',def='armcomlaser',onlytargetcategory='NOTSUB',fastautoretargeting=true},[3]={def='old_armsnipe_weapon',onlytargetcategory='NOTSUB'},[4]={def=''},[1]={def=''},[6]={def=''}}},armcomlvl4={footprintx=2,footprintz=2,autoheal=2213,builddistance=500,canresurrect=true,energymake=3112,health=28000,speed=82,metalmake=86,workertime=6200,buildoptions={'armanni','armpb','armamb','armmoho','armuwmme','armflak','armmercury','armgate','armsd','armfort','armtarg','armarad','armamd','armveil','armuwadvms','armuwadves','armmmkr','armuwmmm','armavp','armaap','armalab','armfflak','armatl','armkraken','armbrtha','armannit3','armlwall','armgatet3','armannit4','armnanotct3'},weapondefs={old_armsnipe_weapon={areaofeffect=72,avoidfeature=true,avoidfriendly=true,collidefeature=true,collidefriendly=false,corethickness=0.75,craterareaofeffect=0,craterboost=0,commandfire=true,cratermult=0,cegtag='railgun',duration=0.12,edgeeffectiveness=1,energypershot=2000,explosiongenerator='custom:laserhit-large-blue',firestarter=100,impulseboost=0.4,impulsefactor=1,intensity=1.4,name='Long-range g2g armor-piercing rifle',range=1250,reloadtime=0.5,rgbcolor='0.4 0.1 0.7',rgbcolor2='0.4 0.1 0.7',soundhit='sniperhit',soundhitwet='sizzle',soundstart='sniper3',soundtrigger=true,stockpile=true,stockpiletime=2,customparams={stockpilelimit=15},texture1='shot',texture2='empty',thickness=6,tolerance=1000,turret=true,weapontype='LaserCannon',weaponvelocity=3000,damage={commanders=10,default=45000}},ata={areaofeffect=16,avoidfeature=false,beamtime=1.25,collidefriendly=false,corethickness=0.5,craterareaofeffect=0,craterboost=0,cratermult=0,edgeeffectiveness=0.30,energypershot=7000,explosiongenerator='custom:laserhit-large-blue',firestarter=90,impulsefactor=0,largebeamlaser=true,laserflaresize=7,name='Heavy tachyon beam',noselfdamage=true,range=1100,reloadtime=15,rgbcolor='1 0 1',scrollspeed=5,soundhitdry='',soundhitwet='sizzle',soundstart='annigun1',soundtrigger=1,texture3='largebeam',thickness=10,tilelength=150,tolerance=10000,turret=true,weapontype='BeamLaser',weaponvelocity=3100,damage={commanders=480,default=48000}},armcomlaser={areaofeffect=12,avoidfeature=false,beamtime=0.1,corethickness=0.1,craterareaofeffect=0,craterboost=0,cratermult=0,cylindertargeting=1,edgeeffectiveness=1,explosiongenerator='custom:laserhit-small-red',firestarter=70,impactonly=1,impulseboost=0,impulsefactor=0,laserflaresize=7.7,name='Close-range laser',noselfdamage=true,range=550,reloadtime=0.5,rgbcolor='0.659 0 1',soundhitdry='',soundhitwet='sizzle',soundstart='lasrcrw2',soundtrigger=1,targetmoveerror=0.05,thickness=6,tolerance=10000,turret=true,weapontype='BeamLaser',weaponvelocity=900,damage={default=1750,VTOL=200}}},weapons={[1]={def='armcomlaser',onlytargetcategory='NOTSUB',fastautoretargeting=true},[3]={def='old_armsnipe_weapon',onlytargetcategory='NOTSUB'},[4]={badtargetcategory='VTOL GROUNDSCOUT',def='ATA',onlytargetcategory='SURFACE'},[5]={def=''},[6]={def=''}}}}if UnitDefs and c0 then for bz,as in pairs(c0)do if UnitDefs[bz]then aa(UnitDefs[bz],as)else UnitDefs[bz]=as end end end end;do local c0={corcom={footprintx=2,footprintz=2,customparams={evolution_target='corcomlvl2',evolution_condition='timer_global',evolution_timer=420},autoheal=80,speed=45,energymake=75,metalmake=6,health=5500,buildoptions={'corsolar','coradvsol','corwin','cormstor','corestor','cormex','corexp','cormakr','corlab','corvp','corap','corhp','coreyes','corrad','cordrag','corllt','corrl','cordl','corhllt','corcan','correap','corlevlr','corak','cormaw','corjamt','cornecro','cortide','corsy','corfhp','coruwms','coruwes','coruwmex','corfmkr','corfdrag','cortl','corfrt','corfrad','corgeo','coruwgeo'},weapondefs={corcomlaser={range=370,damage={bombers=180,default=260,fighters=110,subs=5}},disintegrator={energypershot=1000,reloadtime=8}}},corcomlvl2={footprintx=2,footprintz=2,speed=62,health=8500,energymake=315,metalmake=30,autoheal=300,builddistance=200,workertime=600,buildoptions={'corsolar','coradvsol','corwin','corgeo','cormstor','corestor','cormex','coruwmex','corexp','cormakr','corcan','correap','corlab','corvp','corap','corhp','cornanotc','coreyes','corrad','cordrag','cormaw','corllt','corhllt','corhlt','corpun','corrl','cormadsam','corerad','cordl','corjamt','corjuno','corsy','coruwgeo','corfasp','cornerco','coruwes','corplat','corfhp','coruwms','corfhlt','cornanotct2','corfmkr','cortide','corfrad','corfrt','corfdrag','cortl','cornecro'},customparams={evolution_target='corcomlvl3',evolution_condition='timer_global',evolution_timer=1320,shield_power=500,shield_radius=100},weapondefs={armcomlaser={areaofeffect=16,avoidfeature=false,beamtime=0.1,corethickness=0.1,craterareaofeffect=0,craterboost=0,cratermult=0,cylindertargeting=1,edgeeffectiveness=1,explosiongenerator='custom:laserhit-small-red',firestarter=70,impactonly=1,impulseboost=0,impulsefactor=0,laserflaresize=7.7,name='Light close-quarters g2g/g2a laser',noselfdamage=true,range=500,reloadtime=0.4,rgbcolor='0.6 0.3 0.8',soundhitdry='',soundhitwet='sizzle',soundstart='lasrfir1',soundtrigger=1,targetmoveerror=0.05,thickness=4,tolerance=10000,turret=true,weapontype='BeamLaser',weaponvelocity=900,damage={bombers=180,default=1500,fighters=110,subs=5}},disintegrator={areaofeffect=36,avoidfeature=false,avoidfriendly=false,avoidground=false,bouncerebound=0,cegtag='dgunprojectile',commandfire=true,craterboost=0,cratermult=0.15,edgeeffectiveness=0.15,energypershot=500,explosiongenerator='custom:expldgun',firestarter=100,firesubmersed=false,groundbounce=true,impulseboost=0,impulsefactor=0,name='Disintegrator',noexplode=true,noselfdamage=true,range=250,reloadtime=6,paralyzer={},soundhit='xplomas2s',soundhitwet='sizzlexs',soundstart='disigun1',soundhitvolume=36,soundstartvolume=96,soundtrigger=true,tolerance=10000,turret=true,waterweapon=true,weapontimer=4.2,weapontype='DGun',weaponvelocity=300,damage={commanders=0,default=20000,raptors=10000}}},weapons={[1]={def='armcomlaser',onlytargetcategory='NOTSUB',fastautoretargeting=true},[3]={def='DISINTEGRATOR',onlytargetcategory='NOTSUB'}}},corcomlvl3={footprintx=2,footprintz=2,speed=88,health=30000,energymake=2180,metalmake=49,autoheal=1500,workertime=1200,builddistance=350,buildoptions={'corfus','corafus','corageo','corbhmth','cormoho','cormexp','cormmkr','coruwadves','coruwadvms','corarad','corshroud','corfort','corlab','cortarg','corsd','corgate','cortoast','corvipe','cordoom','corflak','corscreamer','corvp','corfmd','corap','corint','corplat','corsy','coruwmme','coruwmmm','corenaa','corfdoom','coratl','coruwfus','corjugg','corshiva','corsumo','corgol','corkorg','cornanotc2plat','cornanotct2','cornecro','cordoomt3','corhllllt','cormaw','cormwall','corgatet3','legendary_bulwark','cornanotct3'},customparams={evolution_target='corcomlvl4',evolution_condition='timer_global',evolution_timer=1740},weapondefs={corcomlaser={areaofeffect=12,avoidfeature=false,beamtime=0.1,corethickness=0.1,craterareaofeffect=0,craterboost=0,cratermult=0,cylindertargeting=1,edgeeffectiveness=1,explosiongenerator='custom:laserhit-small-red',firestarter=70,impactonly=1,impulseboost=0,impulsefactor=0,laserflaresize=5.5,name='J7Laser',noselfdamage=true,range=900,reloadtime=0.4,rgbcolor='0.7 0 1',soundhitdry='',soundhitwet='sizzle',soundstart='lasrfir1',soundtrigger=1,targetmoveerror=0.05,thickness=3,tolerance=10000,turret=true,weapontype='BeamLaser',weaponvelocity=900,damage={default=2000,subs=5}},disintegrator={areaofeffect=36,avoidfeature=false,avoidfriendly=false,avoidground=false,bouncerebound=0,cegtag='dgunprojectile',commandfire=true,craterboost=0,cratermult=0.15,edgeeffectiveness=0.15,energypershot=500,explosiongenerator='custom:expldgun',firestarter=100,firesubmersed=false,groundbounce=true,impulseboost=0,impulsefactor=0,name='Disintegrator',noexplode=true,noselfdamage=true,range=250,reloadtime=3,paralyzer={},soundhit='xplomas2s',soundhitwet='sizzlexs',soundstart='disigun1',soundhitvolume=36,soundstartvolume=96,soundtrigger=true,size=4,tolerance=10000,turret=true,waterweapon=true,weapontimer=4.2,weapontype='DGun',weaponvelocity=300,damage={commanders=0,default=20000,scavboss=1000,raptors=10000}}},weapons={[1]={def='CORCOMLASER',onlytargetcategory='NOTSUB',fastautoretargeting=true},[5]={def=''}}},corcomlvl4={footprintx=2,footprintz=2,speed=80,health=50000,energymake=2380,metalmake=56,autoheal=3550,workertime=1800,builddistance=500,buildoptions={'corfus','corafus','corageo','corbhmth','cormoho','cormexp','cormmkr','coruwadves','coruwadvms','corarad','corshroud','corfort','corlab','cortarg','corsd','corgate','cortoast','corvipe','cordoom','corflak','corscreamer','corvp','corfmd','corap','corint','corplat','corsy','coruwmme','coruwmmm','corenaa','corfdoom','coratl','coruwfus','corjugg','corshiva','corsumo','corgol','corkorg','cornanotc2plat','cornanotct2','cornecro','cordoomt3','corhllllt','cormaw','cormwall','corgatet3','legendary_bulwark','cornanotct3'},customparams={shield_power=500,shield_radius=100},weapondefs={CORCOMLASER={areaofeffect=12,avoidfeature=false,beamtime=0.1,corethickness=0.1,craterareaofeffect=0,craterboost=0,cratermult=0,cylindertargeting=1,edgeeffectiveness=1,explosiongenerator='custom:laserhit-small-red',firestarter=70,impactonly=1,impulseboost=0,impulsefactor=0,laserflaresize=5.5,name='J7Laser',noselfdamage=true,range=1000,reloadtime=0.4,rgbcolor='0.7 0 1',soundhitdry='',soundhitwet='sizzle',soundstart='lasrfir1',soundtrigger=1,targetmoveerror=0.05,thickness=3,tolerance=10000,turret=true,weapontype='BeamLaser',weaponvelocity=900,damage={default=2500,subs=5}},disintegratorxl={areaofeffect=105,avoidfeature=false,avoidfriendly=true,avoidground=false,burst=1,burstrate=0,bouncerebound=0,cegtag='gausscannonprojectilexl',craterareaofeffect=0,craterboost=0,cratermult=0,commandfire=true,cameraShake=0,edgeeffectiveness=1,energypershot=0,explosiongenerator='custom:burnblackbiggest',firestarter=100,firesubmersed=false,gravityaffected=true,impulsefactor=0,intensity=4,name='Darkmatter Photon-Disruptor',noexplode=true,noselfdamage=true,range=500,reloadtime=1,rgbcolor='0.7 0.3 1.0',size=5.5,soundhit='xplomas2',soundhitwet='sizzlexs',soundstart='disigun1',soundtrigger=true,tolerance=10000,turret=true,weapontimer=4.2,weapontype='DGun',weaponvelocity=505,damage={commanders=0,default=20000,scavboss=1000,raptors=10000}},corcomeyelaser={allowNonBlockingAim=true,avoidfriendly=true,areaofeffect=6,avoidfeature=false,beamtime=0.033,camerashake=0.1,collidefriendly=false,corethickness=0.35,craterareaofeffect=12,craterboost=0,cratermult=0,edgeeffectiveness=1,energypershot=0,explosiongenerator='custom:laserhit-small-red',firestarter=90,firetolerance=300,impulsefactor=0,laserflaresize=2,name='EyeLaser',noselfdamage=true,proximitypriority=1,range=870,reloadtime=0.033,rgbcolor='0 1 0',rgbcolor2='0.8 0 0',scrollspeed=5,soundhitdry='flamhit1',soundhitwet='sizzle',soundstart='heatray3burn',soundstartvolume=6,soundtrigger=1,thickness=2.5,turret=true,weapontype='BeamLaser',weaponvelocity=1500,damage={default=185}}},weapons={[1]={def='CORCOMLASER',onlytargetcategory='NOTSUB',fastautoretargeting=true},[3]={badtargetcategory='VTOL',def='disintegratorxl',onlytargetcategory='SURFACE'},[6]={def=''},[5]={badtargetcategory='VTOL GROUNDSCOUT',def='corcomeyelaser',onlytargetcategory='SURFACE'}}}}if UnitDefs and c0 then for bz,as in pairs(c0)do if UnitDefs[bz]then aa(UnitDefs[bz],as)else UnitDefs[bz]=as end end end end;do local c0={legcom={footprintx=2,footprintz=2,canresurrect=true,energymake=50,metalmake=5,health=6000,autoheal=40,buildoptions={'legsolar','legwin','legmstor','legestor','legmex','legeconv','legnanotc','legrezbot','leglab','legvp','legap','legdtl','legdtf','legdtr','legjam'},customparams={evolution_target='legcomlvl2',evolution_condition='timer_global',evolution_timer=420},weapondefs={legcomlaser={corethickness=0.25,duration=0.09,name='Light close-quarters g2g/g2a laser',range=360,reloadtime=0.20,rgbcolor='0 2 1',soundhitdry='',soundhitwet='sizzle',soundstart='lasrcrw1',soundtrigger=true,sprayangle=700,thickness=6,texture1='shot',texture2='empty',weapontype='LaserCannon',weaponvelocity=2100,damage={default=250}},shotgun={areaofeffect=60,energypershot=0,avoidfeature=false,craterboost=0,cratermult=0,cameraShake=0,edgeeffectiveness=0.65,explosiongenerator='custom:genericshellexplosion-small',impulseboost=0.2,impulsefactor=0.2,intensity=3,name='6 Gauge Shotgun',noselfdamage=true,predictboost=1,projectiles=6,range=320,reloadtime=2,rgbcolor='1 0.75 0.25',size=2,soundhit='xplomed2xs',soundhitwet='splsmed',soundstart='kroggie2xs',soundstartvolume=12,sprayangle=2000,turret=true,commandfire=true,weapontimer=1,weapontype='Cannon',weaponvelocity=600,stockpile=true,stockpiletime=5,customparams={stockpilelimit=10},damage={default=1800,commanders=0}}},weapons={[3]={def='shotgun',onlytargetcategory='SURFACE'}}},legcomlvl2={footprintx=2,footprintz=2,canresurrect=true,energymake=400,metalmake=20,speed=62,autoheal=200,builddistance=200,workertime=800,health=12000,customparams={evolution_target='legcomlvl3',evolution_condition='timer_global',evolution_timer=1320},buildoptions={'legsolar','legadvsol','legwin','legmstor','legestor','legmex','legeconv','legrezbot','leglab','legvp','legap','corhllt','leggeo','legnanotct2','legjam','legdtf','legmg','legrad','legdtl','legdtr','legrhapsis'},weapondefs={legcomlaser={accuracy=50,areaofeffect=12,avoidfriendly=false,avoidfeature=false,collidefriendly=false,collidefeature=true,beamtime=0.09,corethickness=0.3,duration=0.09,explosiongenerator='custom:laserhit-small-red',firestarter=70,impactonly=1,impulseboost=0,impulsefactor=0,name='Light close-quarters g2g/g2a laser',noselfdamage=true,range=500,reloadtime=0.2,rgbcolor='0 0.95 0.05',soundhitdry='',soundhitwet='sizzle',soundstart='lasrcrw1',soundtrigger=true,sprayangle=500,targetmoveerror=0.05,thickness=7,tolerance=1000,texture1='shot',texture2='empty',turret=true,weapontype='LaserCannon',weaponvelocity=2200,damage={bombers=180,default=450,fighters=110,subs=5}},shotgun={areaofeffect=65,energypershot=0,avoidfeature=false,craterboost=0,cratermult=0,cameraShake=0,edgeeffectiveness=0.65,explosiongenerator='custom:genericshellexplosion-small',impulseboost=0.2,impulsefactor=0.2,intensity=3,name='12 Gauge Shotgun',noselfdamage=true,predictboost=1,projectiles=7,range=440,reloadtime=2,rgbcolor='1 0.75 0.25',size=2.5,soundhit='xplomed2xs',soundhitwet='splsmed',soundstart='kroggie2xs',soundstartvolume=12,sprayangle=2250,turret=true,commandfire=true,weapontimer=1,weapontype='Cannon',weaponvelocity=600,stockpile=true,stockpiletime=5,customparams={stockpilelimit=15},damage={default=2200,commanders=0}}},weapons={[1]={def='legcomlaser',onlytargetcategory='NOTSUB',fastautoretargeting=true},[3]={def='shotgun',onlytargetcategory='SURFACE'}}},legcomlvl3={footprintx=2,footprintz=2,canresurrect=true,energymake=1500,metalmake=45,speed=85,builddistance=350,workertime=1200,autoheal=900,health=26000,customparams={evolution_target='legcomlvl4',evolution_condition='timer_global',evolution_timer=1740},buildoptions={'legdeflector','legfus','legbombard','legadvestore','legmoho','legadveconv','legarad','legajam','legforti','legacluster','legamstor','legflak','legabm','legbastion','legdtr','legdtf','legrezbot','legdtl','leglab','legvp','legap','legbastiont4','legnanotct2','legnanotct3','legapopupdef'},weapondefs={legcomlaser={accuracy=50,areaofeffect=12,avoidfriendly=true,avoidfeature=true,collidefriendly=false,collidefeature=true,beamtime=0.09,corethickness=0.55,duration=0.09,explosiongenerator='custom:laserhit-small-red',firestarter=70,impactonly=0,impulseboost=0,impulsefactor=0,name='Light close-quarters g2g/g2a laser',noselfdamage=true,range=640,reloadtime=0.2,rgbcolor='0 0.2 0.8',soundhitdry='',soundhitwet='sizzle',soundstart='lasrcrw1',soundtrigger=true,sprayangle=500,targetmoveerror=0.05,thickness=7,tolerance=1000,texture1='shot',texture2='empty',turret=true,weapontype='LaserCannon',weaponvelocity=2500,damage={bombers=180,default=650,fighters=110,subs=5}},shotgun={areaofeffect=90,energypershot=0,avoidfeature=false,craterboost=0,cratermult=0,cameraShake=0,edgeeffectiveness=0.65,explosiongenerator='custom:genericshellexplosion-small',impulseboost=0.2,impulsefactor=0.2,intensity=3,name='12 Gauge Shotgun',noselfdamage=true,predictboost=1,projectiles=7,range=540,reloadtime=2,rgbcolor='1 0.75 0.25',size=2.5,soundhit='xplomed2xs',soundhitwet='splsmed',soundstart='kroggie2xs',soundstartvolume=12,sprayangle=2500,turret=true,commandfire=true,weapontimer=1,weapontype='Cannon',weaponvelocity=600,stockpile=true,stockpiletime=5,customparams={stockpilelimit=20},damage={default=3200,commanders=0}}},weapons={[1]={def='legcomlaser',onlytargetcategory='NOTSUB',fastautoretargeting=true},[3]={def='shotgun',onlytargetcategory='SURFACE'},[5]={def=''}}},legcomlvl4={footprintx=2,footprintz=2,canresurrect=true,energymake=2280,metalmake=64,speed=100,builddistance=500,workertime=1700,autoheal=4500,health=53900,buildoptions={'legdeflector','legbombard','legadvestore','legmoho','legadveconv','legarad','legajam','legkeres','legacluster','legamstor','legflak','legabm','legbastion','legbastiont4','legnanotct2','legrwall','leglab','legvp','legap','legtarg','legsd','leglraa','legdtl','legdtf','legministarfall','legstarfall','leggatet3','legperdition','legsilo','legnanotct3'},weapondefs={machinegun={accuracy=80,areaofeffect=10,avoidfeature=false,beamburst=true,beamdecay=1,beamtime=0.07,burst=6,burstrate=0.10667,camerashake=0,corethickness=0.35,craterareaofeffect=0,craterboost=0,cratermult=0,edgeeffectiveness=1,explosiongenerator="custom:laserhit-medium-red",firestarter=10,impulsefactor=0,largebeamlaser=true,laserflaresize=30,name="Rapid-fire close quarters g2g armor-piercing laser",noselfdamage=true,pulsespeed="q8",range=1100,reloadtime=0.50,rgbcolor="0.7 0.3 1.0",rgbcolor2="0.8 0.6 1.0",soundhitdry="",soundhitwet="sizzle",soundstart="lasfirerc",soundtrigger=1,sprayangle=500,targetborder=0.2,thickness=5.5,tolerance=4500,turret=true,weapontype="BeamLaser",weaponvelocity=920,damage={default=1300,vtol=180}},shotgunarm={areaofeffect=112,commandfire=true,avoidfeature=false,craterboost=0,cratermult=0,cameraShake=0,edgeeffectiveness=0.65,explosiongenerator="custom:genericshellexplosion-medium",impulsefactor=0.8,intensity=0.2,mygravity=1,name="GaussCannon",noselfdamage=true,predictboost=1,projectiles=20,range=650,reloadtime=1,rgbcolor="0.8 0.4 1.0",size=4,sizeDecay=0.044,stages=16,alphaDecay=0.66,soundhit="xplomed2xs",soundhitwet="splsmed",soundstart="kroggie2xs",sprayangle=3500,tolerance=6000,turret=true,waterweapon=true,weapontimer=2,weapontype="Cannon",weaponvelocity=900,stockpile=true,stockpiletime=2,customparams={stockpilelimit=50},damage={default=10000,commanders=0}},exp_heavyrocket={areaofeffect=70,collidefriendly=0,collidefeature=0,cameraShake=0,energypershot=125,avoidfeature=0,avoidfriendly=0,burst=4,burstrate=0.3,cegtag="missiletrailsmall-red",colormap='0.75 0.73 0.67 0.024   0.37 0.4 0.30 0.021   0.22 0.21 0.14 0.018  0.024 0.014 0.009 0.03   0.0 0.0 0.0 0.008',craterboost=0,craterareaofeffect=0,cratermult=0,dance=24,edgeeffectiveness=0.65,explosiongenerator="custom:burnblack",firestarter=70,flighttime=1.05,flamegfxtime=1,impulsefactor=0.123,impactonly=1,model="catapultmissile.s3o",movingaccuracy=600,name="Raptor Boomer",noselfdamage=true,proximitypriority=nil,range=700,reloadtime=1,smoketrail=true,smokePeriod=4,smoketime=16,smokesize=8.5,smokecolor=0.5,size=2,smokeTrailCastShadow=false,soundhit="rockhit",soundhitwet="splsmed",soundstart="rapidrocket3",startvelocity=165,rgbcolor='1 0.25 0.1',texture1="null",texture2="smoketrailbar",trajectoryheight=1,targetmoveerror=0.2,turnrate=5000,tracks=true,turret=true,allowNonBlockingAim=true,weaponacceleration=660,weapontimer=6,weapontype="MissileLauncher",weaponvelocity=950,wobble=2000,damage={default=1300},customparams={exclude_preaim=true,overrange_distance=777,projectile_destruction_method="descend"}}},weapons={[1]={def='machinegun',onlytargetcategory='NOTSUB',fastautoretargeting=true},[3]={def='shotgunarm',onlytargetcategory='WEAPON'},[5]={def='exp_heavyrocket',onlytargetcategory='SURFACE'}}}}if UnitDefs and c0 then for bz,as in pairs(c0)do if UnitDefs[bz]then aa(UnitDefs[bz],as)else UnitDefs[bz]=as end end end end;local c3=a5;local c4=ipairs;local c5=D;local aF=pairs;local c6=K;local c7=L;local c8=M;local c9=Q;local ca="health"local cb="metalCost"local cc="buildTime"local cd="energyCost"local ce="energyMake"local cf="metalMake"local cg="windGenerator"local ch="damage"local ci="default"local cj="name"local ck="customParams"local cl="model_scale"local cm="footprintX"local cn="footprintZ"local co="mass"local cp="areaOfEffect"local cq="is_compressed_unit"local cr="compression_factor"local cs="color_tint"local ct="1 0.5 0.5"local cu="is_fusion_unit"local cv="fusion_tier"local cw="type"local cx="variable"local function cy(as)local cz=as.customparams;if not cz then if as.customParams then cz=as.customParams;as.customparams=cz else cz={}as.customparams=cz end end;return cz end;local function cA(ab)local cB={}for a8,a9 in pairs(ab)do cB[a8]=a9 end;return cB end;local function cC(bv,cD,at)local cE=cD==2 and bv or bv.."_t"..cD-1;local cF=bv.."_t"..cD;if UnitDefs[cE]then local cG=c3({},UnitDefs[cE])cG[ca]=cG[ca]*16;cG[cb]=cG[cb]*4;cG[cd]=cG[cd]*4;cG[cc]=cG[cc]*4;cG[ce]=cG[ce]*4.2;cG[cf]=cG[cf]*4.2;cG[cg]=cG[cg]*4.2;if cG.weapondefs then local cH={}for cI,cJ in pairs(cG.weapondefs)do local cK=cA(cJ)if cK.damage then cK.damage=cA(cK.damage)if cK.damage.default then cK.damage.default=cK.damage.default*4.2 end end;cH[cI]=cK end;cG.weapondefs=cH end;cG[cm]=cG[cm]*1.5;cG[cn]=cG[cn]*1.5;cG[cj]=at.." T"..cD;local cz=cy(cG)local cL=cA(cz)cG.customparams=cL;if cG.customParams then cG.customParams=cL end;cL[cu]=true;cL[cv]=cD;cL[cl]=1.5;UnitDefs[cF]=cG end end;local function cM(bv,cN,at)if UnitDefs[bv]then local cG=c3({},UnitDefs[bv])cG[ca]=cG[ca]*cN;cG[cb]=cG[cb]*cN;cG[cd]=cG[cd]*cN;cG[cc]=cG[cc]*cN;cG[co]=cG[co]*cN;cG[ce]=cG[ce]*cN;cG[cf]=cG[cf]*cN;cG[cg]=cG[cg]*cN;local cO=H(cN)if cG.weapondefs then local cH={}for cI,cJ in pairs(cG.weapondefs)do local cK=cA(cJ)if cK.damage then cK.damage=cA(cK.damage)if cK.damage.default then cK.damage.default=cK.damage.default*cN end end;if cK[cp]then cK[cp]=cK[cp]*cO end;cH[cI]=cK end;cG.weapondefs=cH end;cG[cj]=at.." x"..cN;local cz=cy(cG)local cL=cA(cz)cG.customparams=cL;if cG.customParams then cG.customParams=cL end;cL[cq]=true;cL[cr]=cN;cL[cs]=ct;if cN==2 then cL[cl]=1.2 elseif cN==5 then cL[cl]=1.5;cG[cm]=cG[cm]*1.5;cG[cn]=cG[cn]*1.5 elseif cN==10 then cL[cl]=1.5;cG[cm]=cG[cm]*1.5;cG[cn]=cG[cn]*1.5 end;UnitDefs[bv.."_compressed_x"..cN]=cG end end;local cP={{base="armsolar",human="Solar Collector"},{base="corsolar",human="Solar Collector"},{base="armwin",human="Wind Generator"},{base="corwin",human="Wind Generator"},{base="armmakr",human="Metal Maker"},{base="cormakr",human="Metal Maker"},{base="armllt",human="Light Laser Tower"},{base="corllt",human="Light Laser Tower"}}local cQ={"raptor_land_swarmer_basic_t1_v1","raptor_land_assault_basic_t2_v1","raptor_air_fighter_basic","raptor_hive_swarmer_basic","raptor_hive_assault_basic"}for au,cR in ipairs(cP)do for cD=2,5 do cC(cR.base,cD,cR.human)end end;local cS={2,5,10}for au,cT in ipairs(cQ)do for au,cN in ipairs(cS)do cM(cT,cN,cT)end end;for au,cR in ipairs(cP)do for au,cN in ipairs(cS)do cM(cR.base,cN,cR.human)end end;if UnitDefs["armconst3"]then local as=UnitDefs["armconst3"]local bz="armconst3"as.maxThisUnit=10 end;if UnitDefs["corconst3"]then local as=UnitDefs["corconst3"]local bz="corconst3"as.maxThisUnit=10 end;if UnitDefs["legconst3"]then local as=UnitDefs["legconst3"]local bz="legconst3"as.maxThisUnit=10 end;if UnitDefs["armmeatball"]then local as=UnitDefs["armmeatball"]local bz="armmeatball"as.maxThisUnit=20 end;if UnitDefs["corclogger"]then local as=UnitDefs["corclogger"]local bz="corclogger"as.maxThisUnit=20 end;if UnitDefs["armavp"]then local as=UnitDefs["armavp"]local bz="armavp"local cU=as.buildoptions;if not cU then as.buildoptions={}cU=as.buildoptions end;c9(cU,"armmeatball")local cU=as.buildoptions;if not cU then as.buildoptions={}cU=as.buildoptions end;c9(cU,"corclogger")end;if UnitDefs["coravp"]then local as=UnitDefs["coravp"]local bz="coravp"local cU=as.buildoptions;if not cU then as.buildoptions={}cU=as.buildoptions end;c9(cU,"armmeatball")local cU=as.buildoptions;if not cU then as.buildoptions={}cU=as.buildoptions end;c9(cU,"corclogger")end;if UnitDefs["legavp"]then local as=UnitDefs["legavp"]local bz="legavp"local cU=as.buildoptions;if not cU then as.buildoptions={}cU=as.buildoptions end;c9(cU,"armmeatball")local cU=as.buildoptions;if not cU then as.buildoptions={}cU=as.buildoptions end;c9(cU,"corclogger")end;for cV,as in aF(UnitDefs)do local bz=as.name or cV;if(as.customParams and as.customParams["subfolder"]=="other/raptors"or as.customparams and as.customparams["subfolder"]=="other/raptors")and not c7(bz,"^raptor_queen_.*")then as.health=as.health*1.3 end;if c7(bz,"^raptor_land_swarmer_heal")then as.reclaimSpeed=100;as.stealth=false;as.builder=false;as.buildSpeed=as.buildSpeed*0.5;as.canAssist=false;as.maxThisUnit=0 end;if as.customParams and as.customParams["subfolder"]=="other/raptors"or as.customparams and as.customparams["subfolder"]=="other/raptors"then as.noChaseCategory="OBJECT"if as[ca]then as[cb]=c5(as[ca]*0.576923077)end end;if c8(bz,1,13)=="raptor_queen_"then as.repairable=false;as.canbehealed=false;as[cc]=9999999;as.autoHeal=2;as.canSelfRepair=false;as.health=as.health*1.3 end;if c7(bz,"ragnarok")then as.maxThisUnit=80 end;if c7(bz,"calamity")then as.maxThisUnit=80 end;if c7(bz,"tyrannus")then as.maxThisUnit=80 end;if c7(bz,"starfall")then as.maxThisUnit=80 end end;local function cW(bz,as)if c8(bz,1,15)=="scavengerbossv4"then as.health=as.health*1.3 end;if c8(bz,-5)=="_scav"and not c7(bz,"^scavengerbossv4")then if as[ca]then as[ca]=c5(as[ca]*1.3)end end;if c8(bz,-5)=="_scav"then if as[cb]then as[cb]=c5(as[cb]*1.3)end;as.noChaseCategory="OBJECT"end end;if UnitDef_Post then local cX=UnitDef_Post;UnitDef_Post=function(bz,as)cX(bz,as)cW(bz,as)end else UnitDef_Post=cW end;local function cY()local cZ=i()or{}local c_=tonumber(cZ.adaptive_compression_max)or 10;local d0=true;if cZ.adaptive_vampire=="0"then d0=false end;local d1=true;if cZ.adaptive_boss_tint=="0"then d1=false end;local m=m;local c=c;local b=b;local r=r;local f=f;local h=h;local e=e;local p=p;local w=w;local o=o;local v=v;local d2=f()local d3={}local d4={}local d5={}local d6=1;local function d7(d8,cN)local d9=d8 ..":"..cN;if d5[d9]~=nil then return d5[d9]end;if not d8 then return nil end;local c2=UnitDefs[d8]if not c2 then return nil end;local bz=c2.name;local ai="_compressed_x"..cN;local bw=bz..ai;local cG=UnitDefNames[bw]local da=cG and cG.id or nil;d5[d9]=da;return da end;T=function(aD)if aD%30==0 then local au,db=h()local dc=e()local dd=m()local cN=1;if db<0.8 or dc<20 then cN=10 elseif db<0.9 or dc<35 then cN=5 elseif db<1.0 then cN=2 end;if dd>3500 then cN=10 elseif dd>2000 and cN<5 then cN=5 elseif dd>1000 and cN<2 then cN=2 end;if cN>c_ then cN=c_ end;d6=cN end end;U=function(de,d8,df)if df~=d2 then return end;local dg=d4[d8]if dg==nil then local c2=UnitDefs[d8]if c2 then if c2.customParams and c2.customParams.is_compressed_unit then dg=false else if I(c2.name,"raptor_land")or I(c2.name,"raptor_air")then dg=true else dg=false end end else dg=false end;d4[d8]=dg end;if not dg then return end;local cN=d6;if cN==1 then return end;local dh=d7(d8,cN)if not dh then if cN==10 then cN=5;dh=d7(d8,cN)end;if not dh and cN>=5 then cN=2;dh=d7(d8,cN)end;if not dh then return end end;d3[d8]=(d3[d8]or 0)+1;if d3[d8]>=cN then local aL,aM,aN=r(de)local di=b(dh,aL,aM,aN,0,df)if d1 and di and spSetUnitColor then spSetUnitColor(di,1,0,0,1)end;d3[d8]=0 end;c(de,false,true)end;V=function(de,d8,df,dj,dk,dl)if not d0 then return end;if df~=d2 or dl~=d2 then return end;if not d6 or d6<10 then return end;local dm=UnitDefs[d8]local dn=UnitDefs[dk]if not(dm and dn)then return end;local dp=I(dm.name,"raptor")local dq=I(dn.name,"raptor")if dp and dq then local dr=p(de)or 0;local ds=p(dj)or 0;local dt,du,dv,dw;if dr>=ds then dt=de;du=dj;dv=dr;dw=ds else dt=dj;du=de;dv=ds;dw=dr end;c(du,false,true)w(dt,dv+dw)local dx=o(dt)or 0;local dy=o(du)or 0;v(dt,dx+dy)end end end;cY()local function dz()local g=g;local h=h;local c=c;local l=l;local f=f;local n=n;local a=a;local j=j;local A=A;local r=r;local z=z;local u=u;local m=m;local k=k;local D=D;local cZ=i()or{}local dA=tonumber(cZ.cull_simspeed)or 0.9;local dB=tonumber(cZ.cull_maxunits)or 5000;local dC=cZ.cull_enabled~="0"local dD=tonumber(cZ.cull_radius)or 2000;W=function()d("[Eco Culler] Initialized with MIN_SIM_SPEED="..tostring(dA)..", MAX_UNITS="..tostring(dB)..", ENABLED="..tostring(dC)..", RADIUS="..tostring(dD))end;local d2=f()local dE={["armsolar"]=true,["corsolar"]=true,["armwin"]=true,["corwin"]=true,["armmakr"]=true,["cormakr"]=true}local dF={}local dG=1;local dH=false;local dI="IDLE"local dJ=0;local dK=300;local dL={}local dM=1024;local dN=900;local function dO(aL,aN)local dP=D(aL/dM)local dQ=D(aN/dM)return dP,dQ,dP..":"..dQ end;local function dR(de)local aL,au,aN=r(de)if aL then local au,au,dS=dO(aL,aN)dL[dS]=g()end end;X=function(de,d8,dT,dU,dV,dW,dX,dY,dZ,d_)dR(de)if dY then dR(dY)end end;Y=function(de,d8,dT,e0,dW,e1,e2)dR(de)end;Z=function(aD)if not dC then return end;if aD%30==0 then local au,db=h()local e3=m()local e4=db<dA or e3>dB;if dI=="IDLE"then if e4 then dI="WARNING"dJ=aD;u("⚠️ Performance Critical! Eco Culling in 10s...")end elseif dI=="WARNING"then if not e4 then dI="IDLE"u("✅ Performance Stabilized. Culling Cancelled.")elseif aD-dJ>=dK then dI="ACTIVE"u("♻️ Eco Culling STARTED: Removing inactive T1 structures...")dF={}dG=1;dH=false;local e5=j()for au,df in pairs(e5)do if df~=d2 then local e6=l(df)for au,e7 in pairs(e6)do local e8=n(e7)if e8 then local c2=UnitDefs[e8]if c2 and dE[c2.name]then Q(dF,{id=e7,team=df,defId=e8})end end end end end;if#dF>0 then dH=true else dI="IDLE"end end elseif dI=="ACTIVE"then if not dH then dI="IDLE"end end end;if dH then local e9=20;local ea=0;local eb=g()while ea<e9 and dG<=#dF do local ec=dF[dG]dG=dG+1;ea=ea+1;local e7=ec.id;if A(e7)then local aL,aM,aN=r(e7)local ed=true;if aL then local dP,dQ,au=dO(aL,aN)for ee=-1,1 do for ef=-1,1 do local dS=dP+ee..":"..dQ+ef;local eg=dL[dS]if eg and eb-eg<dN then ed=false;break end end;if not ed then break end end;if ed then local eh=l(ec.team)local ei=false;local ej,ek,el=k(ec.team)if ej then local em=(aL-ej)^2+(aN-el)^2;if em<dD^2 then ed=false;ed=false end end;if ed then local c2=UnitDefs[ec.defId]if c2 then local en=c2.metalCost or 0;a(ec.team,"metal",en)z("mediumexplosion",aL,aM,aN,0,0,0)c(e7,false,true)end end end end end end;if dG>#dF then dH=false;dF={}end end end end;dz()local function eo()local cZ=i()or{}local r=r;local n=n;local b=b;local c=c;local y=y;local p=p;local w=w;local s=s;local o=o;local v=v;local ep={}local eq={}_=function()local er={"armsolar","corsolar","armwin","corwin","armmakr","cormakr","armllt","corllt"}for au,bz in pairs(er)do local es=UnitDefNames[bz]local et=UnitDefNames[bz.."_t2"]if es then eq[es.id]=1 end;if es and et then ep[es.id]=et.id;eq[et.id]=2 end;for aq=2,4 do local eu=UnitDefNames[bz.."_t"..aq]local next=UnitDefNames[bz.."_t"..aq+1]if eu then eq[eu.id]=aq end;if eu and next then ep[eu.id]=next.id;eq[next.id]=aq+1 end end end end;a0=function(de,d8,df)local ev=tonumber(cZ.fusion_mintier)or 1;local ew=eq[d8]or 0;if ew<ev then return end;local ex=ep[d8]if not ex then return end;local aL,au,aN=r(de)local c2=UnitDefs[d8]local ey=c2.footprintX*16;local ez=c2.footprintZ*16;local eA=E(ey,ez)*2;local eB=s(aL,aN,eA,df)local dF={}for au,eC in pairs(eB)do if n(eC)==d8 and eC~=de then local eD,au,eE=r(eC)Q(dF,{id=eC,x=eD,z=eE})end end;if#dF<3 then return end;local function eF(eG,eH)for au,ay in pairs(dF)do if B(ay.x-eG)<8 and B(ay.z-eH)<8 then return ay.id end end;return nil end;local function eI(eJ,eK,eL,eM)if eJ and eK and eL and eM then y(eJ,true)y(eK,true)y(eL,true)y(eM,true)local dr=p(eJ)or 0;local ds=p(eK)or 0;local eN=p(eL)or 0;local eO=p(eM)or 0;local eP,au,eQ=r(eJ)local eR,au,eS=r(eM)local eT=(eP+eR)/2;local eU=(eQ+eS)/2;local dx=o(eJ)or 0;local dy=o(eK)or 0;local eV=o(eL)or 0;local eW=o(eM)or 0;local eX=dx+dy+eV+eW;local eY=tonumber(cZ.fusion_efficiency)or 1.10;eX=eX*eY;c(eJ,false,true)c(eK,false,true)c(eL,false,true)c(eM,false,true)local eZ=b(ex,eT,0,eU,0,df)if eZ then local e_=(dr+ds+eN+eO)*eY;w(eZ,e_)v(eZ,eX)end;return true end;return false end;if eI(de,eF(aL+ey,aN),eF(aL,aN+ez),eF(aL+ey,aN+ez))then return end;if eI(eF(aL-ey,aN),de,eF(aL-ey,aN+ez),eF(aL,aN+ez))then return end;if eI(eF(aL,aN-ez),eF(aL+ey,aN-ez),de,eF(aL+ey,aN))then return end;if eI(eF(aL-ey,aN-ez),eF(aL,aN-ez),eF(aL-ey,aN),de)then return end end;a1=function(de,d8,df)if cZ.meganuke~="1"then return end;local cD=eq[d8]if cD and cD>=3 then local aL,aM,aN=r(de)if z then z("atomic_blast",aL,aM,aN,0,1,0)end end end end;eo()local function f0()local r=r;local n=n;local t=t;local g=g;local s=s;local l=l;local j=j;local A=A;local H=H;local B=B;local D=D;local G=G;local x=x;local i=i;local q=q;local f1=f()local f2=30;local f3=20;local f4={}local f5=1;local f6=0;local f7=nil;local function f8(de)local aL,au,aN=r(de)if not aL then return end;local cZ=i()if cZ and(cZ.debug_mode=="1"or cZ.debug_mode==1)then x(de,"Squad Leader")end;local f9=q(de,2000,false)if f9 then t(de,CMD.ATTACK,{f9},{})else t(de,CMD.FIGHT,{Game.mapSizeX/2,0,Game.mapSizeZ/2},{})end end;local function fa(de,fb)if fb and A(fb)then local fc,au,fd=r(fb)if fc then local fe=G(-50,50)local ff=G(-50,50)t(de,CMD.MOVE,{fc+fe,0,fd+ff},{})return end end;f8(de)end;local function fg(de)local fh=f4[de]if not fh then return end;if fh.isLeader then f8(de)else fa(de,fh.leaderID)end end;a2=function(de,d8,df)if df==f1 then if f6>=f3 or f7==nil or not A(f7)then f5=f5+1;f6=1;f7=de;f4[de]={id=de,bucket=de%f2,isLeader=true,squadID=f5}else f6=f6+1;f4[de]={id=de,bucket=de%f2,isLeader=false,leaderID=f7,squadID=f5}end end end;a3=function(de,d8,df)if f4[de]then f4[de]=nil;if de==f7 then f7=nil;f6=f3 end end end;a4=function(aD)local fi=aD%f2;for cV,fh in pairs(f4)do if fh.bucket==fi then fg(cV)end end end end;f0()function gadget:GameFrame(...)if T then T(...)end;if Z then Z(...)end;if a4 then a4(...)end end;function gadget:UnitCreated(...)if U then U(...)end;if a2 then a2(...)end end;function gadget:UnitCollision(...)if V then V(...)end end;function gadget:Initialize(...)if W then W(...)end;if _ then _(...)end end;function gadget:UnitDamaged(...)if X then X(...)end end;function gadget:UnitWeaponFire(...)if Y then Y(...)end end;function gadget:UnitFinished(...)if a0 then a0(...)end end;function gadget:UnitDestroyed(...)if a1 then a1(...)end;if a3 then a3(...)end end