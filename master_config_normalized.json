[
  {
    "name": "Queen Health & Repair",
    "description": "Queen Health & Repair Adjustments",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameMatch",
        "regex": "^raptor_queen_"
      }
    ],
    "mutations": [
      {
        "op": "set",
        "field": "repairable",
        "value": false
      },
      {
        "op": "set",
        "field": "canbehealed",
        "value": false
      },
      {
        "op": "set",
        "field": "buildTime",
        "value": 9999999
      },
      {
        "op": "set",
        "field": "autoHeal",
        "value": 2
      },
      {
        "op": "set",
        "field": "canSelfRepair",
        "value": false
      },
      {
        "op": "multiply",
        "field": "health",
        "factor": {
          "type": "variable",
          "key": "multiplier"
        }
      }
    ]
  },
  {
    "name": "Swarmer Heal Adjustments",
    "description": "Swarmer Heal adjustments",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameMatch",
        "regex": "^raptor_land_swarmer_heal"
      }
    ],
    "mutations": [
      {
        "op": "set",
        "field": "reclaimSpeed",
        "value": 100
      },
      {
        "op": "set",
        "field": "stealth",
        "value": false
      },
      {
        "op": "set",
        "field": "builder",
        "value": false
      },
      {
        "op": "multiply",
        "field": "buildSpeed",
        "factor": {
          "type": "variable",
          "key": "workertimeMultiplier"
        }
      },
      {
        "op": "set",
        "field": "canAssist",
        "value": false
      },
      {
        "op": "set",
        "field": "maxThisUnit",
        "value": 0
      }
    ]
  },
  {
    "name": "Raptor Health Adjustments",
    "description": "Raptor Health adjustments",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "customParam",
        "key": "subfolder",
        "value": "other/raptors"
      },
      {
        "type": "nameNotMatch",
        "regex": "^raptor_queen_.*"
      }
    ],
    "mutations": [
      {
        "op": "multiply",
        "field": "health",
        "factor": {
          "type": "variable",
          "key": "healthMultiplier"
        }
      }
    ]
  },
  {
    "name": "Raptor Metal & Chase",
    "description": "Metal Cost and NoChase",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "customParam",
        "key": "subfolder",
        "value": "other/raptors"
      }
    ],
    "mutations": [
      {
        "op": "set",
        "field": "noChaseCategory",
        "value": "OBJECT"
      },
      {
        "op": "assign_math_floor",
        "target": "metalCost",
        "source": "health",
        "factor": {
          "type": "variable",
          "key": "metalCostFactor"
        }
      }
    ]
  },
  {
    "name": "Scav Boss HP",
    "description": "Scavenger Boss HP adjustment",
    "scope": "UnitDef_Post",
    "conditions": [
      {
        "type": "nameStartsWith",
        "prefix": "scavengerbossv4"
      }
    ],
    "mutations": [
      {
        "op": "multiply",
        "field": "health",
        "factor": {
          "type": "variable",
          "key": "multiplier"
        }
      }
    ]
  },
  {
    "name": "Scavengers HP - Health",
    "description": "Scavenger Health",
    "scope": "UnitDef_Post",
    "conditions": [
      {
        "type": "nameEndsWith",
        "suffix": "_scav"
      },
      {
        "type": "nameNotMatch",
        "regex": "^scavengerbossv4"
      }
    ],
    "mutations": [
      {
        "op": "assign_math_floor",
        "target": "health",
        "source": "health",
        "factor": {
          "type": "variable",
          "key": "multiplier"
        }
      }
    ]
  },
  {
    "name": "Scavengers HP - Metal & Category",
    "description": "Scavenger Metal Cost and Category",
    "scope": "UnitDef_Post",
    "conditions": [
      {
        "type": "nameEndsWith",
        "suffix": "_scav"
      }
    ],
    "mutations": [
      {
        "op": "assign_math_floor",
        "target": "metalCost",
        "source": "metalCost",
        "factor": {
          "type": "variable",
          "key": "multiplier"
        }
      },
      {
        "op": "set",
        "field": "noChaseCategory",
        "value": "OBJECT"
      }
    ]
  },
  {
    "name": "Add Unit to Factory",
    "description": "Adds unit to build options",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameStartsWith",
        "prefix": {
          "type": "variable",
          "key": "factoryPrefix"
        }
      }
    ],
    "mutations": [
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": {
          "type": "variable",
          "key": "unitName"
        }
      }
    ]
  },
  {
    "name": "Raptor Air Fighter Basic Tweaks",
    "description": "Adjusts weapon properties for Raptor Air Fighter Basic",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameStartsWith",
        "prefix": "raptor_air_fighter_basic"
      }
    ],
    "mutations": [
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "name",
            "value": "Spike"
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "accuracy",
            "value": 200
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "collidefriendly",
            "value": 0
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "collidefeature",
            "value": 0
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "avoidfeature",
            "value": 0
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "avoidfriendly",
            "value": 0
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "areaofeffect",
            "value": 64
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "edgeeffectiveness",
            "value": 0.3
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "explosiongenerator",
            "value": "custom:raptorspike-large-sparks-burn"
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "cameraShake",
            "value": {}
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "dance",
            "value": {}
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "interceptedbyshieldtype",
            "value": 0
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "model",
            "value": "Raptors/spike.s3o"
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "reloadtime",
            "value": 1.1
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "soundstart",
            "value": "talonattack"
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "startvelocity",
            "value": 200
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "submissile",
            "value": 1
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "smoketrail",
            "value": 0
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "smokePeriod",
            "value": {}
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "smoketime",
            "value": {}
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "smokesize",
            "value": {}
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "smokecolor",
            "value": {}
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "soundhit",
            "value": {}
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "texture1",
            "value": {}
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "texture2",
            "value": {}
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "tolerance",
            "value": {}
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "tracks",
            "value": 0
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "turnrate",
            "value": 60000
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "weaponacceleration",
            "value": 100
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "weapontimer",
            "value": 1
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "weaponvelocity",
            "value": 1000
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "weapontype",
            "value": {}
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "set",
            "field": "wobble",
            "value": {}
          }
        ]
      }
    ]
  },
  {
    "name": "Commander Tweaks",
    "description": "Adjusts customparams and featuredefs for Commanders",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameMatch",
        "regex": "^[acl][ore][rgm]com"
      },
      {
        "type": "nameNotMatch",
        "regex": "_scav$"
      }
    ],
    "mutations": [
      {
        "op": "table_merge",
        "field": "customparams",
        "value": {
          "combatradius": 0,
          "fall_damage_multiplier": 0,
          "paratrooper": true,
          "wtboostunittype": {}
        }
      },
      {
        "op": "table_merge",
        "field": "featuredefs",
        "value": {
          "dead": {
            "damage": 9999999,
            "reclaimable": false,
            "mass": 9999999
          }
        }
      }
    ]
  },
  {
    "name": "Raptor Turret Buffs",
    "description": "Doubles health and adjusts reload/range for turrets",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameInList",
        "names": [
          "raptor_antinuke",
          "raptor_turret_acid_t2_v1",
          "raptor_turret_acid_t3_v1",
          "raptor_turret_acid_t4_v1",
          "raptor_turret_antiair_t2_v1",
          "raptor_turret_antiair_t3_v1",
          "raptor_turret_antiair_t4_v1",
          "raptor_turret_antinuke_t2_v1",
          "raptor_turret_antinuke_t3_v1",
          "raptor_turret_basic_t2_v1",
          "raptor_turret_basic_t3_v1",
          "raptor_turret_basic_t4_v1",
          "raptor_turret_burrow_t2_v1",
          "raptor_turret_emp_t2_v1",
          "raptor_turret_emp_t3_v1",
          "raptor_turret_emp_t4_v1",
          "raptor_worm_green"
        ]
      }
    ],
    "mutations": [
      {
        "op": "set",
        "field": "maxThisUnit",
        "value": 10
      },
      {
        "op": "multiply",
        "field": "health",
        "factor": 2
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "multiply",
            "field": "reloadtime",
            "factor": 0.666666
          }
        ]
      },
      {
        "op": "modify_weapon",
        "mutations": [
          {
            "op": "multiply",
            "field": "range",
            "factor": 0.5
          }
        ]
      }
    ]
  },
  {
    "name": "Flying Builder Cleanup",
    "description": "Removes explosion from flying builders",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "fieldValue",
        "field": "builder",
        "value": true
      },
      {
        "type": "fieldValue",
        "field": "canfly",
        "value": true
      }
    ],
    "mutations": [
      {
        "op": "set",
        "field": "explodeAs",
        "value": ""
      },
      {
        "op": "set",
        "field": "selfDestructAs",
        "value": ""
      }
    ]
  },
  {
    "name": "Clone Hive Spawn",
    "description": "Creates Hive Spawn from Raptor Swarmer",
    "scope": "Global",
    "conditions": [],
    "mutations": [
      {
        "op": "clone_unit",
        "source": "raptor_land_swarmer_basic_t1_v1",
        "target": "raptor_hive_swarmer_basic",
        "mutations": [
          {
            "op": "set",
            "field": "name",
            "value": "Hive Spawn"
          },
          {
            "op": "table_merge",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": "Hive Spawn",
              "i18n_en_tooltip": "Raptor spawned to defend hives from attackers."
            }
          }
        ]
      }
    ]
  },
  {
    "name": "Clone Armored Assault Raptor",
    "description": "Creates Armored Assault Raptor",
    "scope": "Global",
    "conditions": [],
    "mutations": [
      {
        "op": "clone_unit",
        "source": "raptor_land_assault_basic_t2_v1",
        "target": "raptor_hive_assault_basic",
        "mutations": [
          {
            "op": "set",
            "field": "name",
            "value": "Armored Assault Raptor"
          },
          {
            "op": "table_merge",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": "Armored Assault Raptor",
              "i18n_en_tooltip": "Heavy, slow, and unyieldingâ€”these beasts are made to take the hits others cant."
            }
          }
        ]
      }
    ]
  },
  {
    "name": "Legendary Pulsar",
    "description": "Creates Legendary Pulsar from Armannit3",
    "scope": "Global",
    "conditions": [],
    "mutations": [
      {
        "op": "clone_unit",
        "source": "armannit3",
        "target": "legendary_pulsar",
        "mutations": [
          {
            "op": "set",
            "field": "name",
            "value": "Legendary Pulsar"
          },
          {
            "op": "set",
            "field": "description",
            "value": "A pinnacle of Armada engineering that fires devastating, rapid-fire tachyon bolts."
          },
          {
            "op": "set",
            "field": "buildTime",
            "value": 300000
          },
          {
            "op": "set",
            "field": "health",
            "value": 30000
          },
          {
            "op": "set",
            "field": "metalCost",
            "value": 43840
          },
          {
            "op": "set",
            "field": "energyCost",
            "value": 1096000
          },
          {
            "op": "set",
            "field": "icontype",
            "value": "armannit3"
          },
          {
            "op": "table_merge",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": "Legendary Pulsar",
              "i18n_en_tooltip": "Fires devastating, rapid-fire tachyon bolts.",
              "techlevel": 4
            }
          },
          {
            "op": "modify_weapon",
            "weaponName": "tachyon_burst_cannon",
            "mutations": [
              {
                "op": "set",
                "field": "name",
                "value": "Tachyon Burst Cannon"
              },
              {
                "op": "set",
                "field": "damage",
                "value": {
                  "default": 8000
                }
              },
              {
                "op": "set",
                "field": "burst",
                "value": 3
              },
              {
                "op": "set",
                "field": "burstrate",
                "value": 0.4
              },
              {
                "op": "set",
                "field": "reloadtime",
                "value": 5
              },
              {
                "op": "set",
                "field": "range",
                "value": 1800
              },
              {
                "op": "set",
                "field": "energypershot",
                "value": 12000
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "name": "Legendary Bastion",
    "description": "Creates Legendary Bastion from Legbastion",
    "scope": "Global",
    "conditions": [],
    "mutations": [
      {
        "op": "clone_unit",
        "source": "legbastion",
        "target": "legendary_bastion",
        "mutations": [
          {
            "op": "set",
            "field": "name",
            "value": "Legendary Bastion"
          },
          {
            "op": "set",
            "field": "description",
            "value": "The ultimate defensive emplacement. Projects a devastating, pulsating heatray."
          },
          {
            "op": "set",
            "field": "health",
            "value": 22000
          },
          {
            "op": "set",
            "field": "metalCost",
            "value": 65760
          },
          {
            "op": "set",
            "field": "energyCost",
            "value": 1986500
          },
          {
            "op": "set",
            "field": "buildTime",
            "value": 180000
          },
          {
            "op": "table_merge",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": "Legendary Bastion",
              "i18n_en_tooltip": "Projects a devastating, pulsating purple heatray.",
              "maxrange": 1450,
              "techlevel": 4
            }
          }
        ]
      }
    ]
  },
  {
    "name": "Legendary Bulwark",
    "description": "Creates Legendary Bulwark from Cordoomt3",
    "scope": "Global",
    "conditions": [],
    "mutations": [
      {
        "op": "clone_unit",
        "source": "cordoomt3",
        "target": "legendary_bulwark",
        "mutations": [
          {
            "op": "set",
            "field": "name",
            "value": "Legendary Bulwark"
          },
          {
            "op": "set",
            "field": "description",
            "value": "A pinnacle of defensive technology, the Legendary Bulwark annihilates all who approach."
          },
          {
            "op": "set",
            "field": "health",
            "value": 42000
          },
          {
            "op": "set",
            "field": "metalCost",
            "value": 61650
          },
          {
            "op": "set",
            "field": "energyCost",
            "value": 1712500
          },
          {
            "op": "set",
            "field": "buildTime",
            "value": 250000
          },
          {
            "op": "table_merge",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": "Legendary Bulwark",
              "i18n_en_tooltip": "The ultimate defensive structure.",
              "paralyzemultiplier": 0.2,
              "techlevel": 4
            }
          }
        ]
      }
    ]
  },
  {
    "name": "Armada Commanders T4 Build Options",
    "description": "Adds Legendary Pulsar to Armada Commanders",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameStartsWith",
        "prefix": "armcomlvl"
      },
      {
        "type": "nameInList",
        "names": [
          "armt3airaide"
        ]
      }
    ],
    "mutations": [
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "legendary_pulsar"
      }
    ]
  },
  {
    "name": "Cortex Commanders T4 Build Options",
    "description": "Adds Legendary Bulwark to Cortex Commanders",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameStartsWith",
        "prefix": "corcomlvl"
      },
      {
        "type": "nameInList",
        "names": [
          "cort3airaide"
        ]
      }
    ],
    "mutations": [
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "legendary_bulwark"
      }
    ]
  },
  {
    "name": "Legion Commanders T4 Build Options",
    "description": "Adds Legendary Bastion to Legion Commanders",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameStartsWith",
        "prefix": "legcomlvl"
      },
      {
        "type": "nameInList",
        "names": [
          "legt3airaide"
        ]
      }
    ],
    "mutations": [
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "legendary_bastion"
      }
    ]
  },
  {
    "name": "Queenling Prima",
    "description": "Creates Queenling Prima from Raptor Matriarch Basic",
    "scope": "Global",
    "conditions": [],
    "mutations": [
      {
        "op": "clone_unit",
        "source": "raptor_matriarch_basic",
        "target": "raptor_miniq_a",
        "mutations": [
          {
            "op": "set",
            "field": "name",
            "value": "Queenling Prima"
          },
          {
            "op": "set",
            "field": "icontype",
            "value": "raptor_queen_veryeasy"
          },
          {
            "op": "multiply",
            "field": "health",
            "factor": 5
          },
          {
            "op": "table_merge",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": "Queenling Prima",
              "i18n_en_tooltip": "Majestic and bold, ruler of the hunt."
            }
          },
          {
            "op": "set",
            "field": "maxThisUnit",
            "value": {
              "type": "math",
              "expression": "max(1, ceil(2 * (spawn_mult / 3)))",
              "variables": {
                "spawn_mult": {
                  "type": "mod_option",
                  "key": "raptor_spawncountmult",
                  "default": 3
                }
              }
            }
          }
        ]
      }
    ]
  },
  {
    "name": "Queenling Secunda",
    "description": "Creates Queenling Secunda from Raptor Matriarch Basic",
    "scope": "Global",
    "conditions": [],
    "mutations": [
      {
        "op": "clone_unit",
        "source": "raptor_matriarch_basic",
        "target": "raptor_miniq_b",
        "mutations": [
          {
            "op": "set",
            "field": "name",
            "value": "Queenling Secunda"
          },
          {
            "op": "set",
            "field": "icontype",
            "value": "raptor_queen_easy"
          },
          {
            "op": "multiply",
            "field": "health",
            "factor": 6
          },
          {
            "op": "table_merge",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": "Queenling Secunda",
              "i18n_en_tooltip": "Swift and sharp, a noble among raptors."
            }
          },
          {
            "op": "set",
            "field": "maxThisUnit",
            "value": {
              "type": "math",
              "expression": "max(1, ceil(3 * (spawn_mult / 3)))",
              "variables": {
                "spawn_mult": {
                  "type": "mod_option",
                  "key": "raptor_spawncountmult",
                  "default": 3
                }
              }
            }
          }
        ]
      }
    ]
  },
  {
    "name": "Queenling Tertia",
    "description": "Creates Queenling Tertia from Raptor Matriarch Basic",
    "scope": "Global",
    "conditions": [],
    "mutations": [
      {
        "op": "clone_unit",
        "source": "raptor_matriarch_basic",
        "target": "raptor_miniq_c",
        "mutations": [
          {
            "op": "set",
            "field": "name",
            "value": "Queenling Tertia"
          },
          {
            "op": "set",
            "field": "icontype",
            "value": "raptor_queen_normal"
          },
          {
            "op": "multiply",
            "field": "health",
            "factor": 7
          },
          {
            "op": "table_merge",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": "Queenling Tertia",
              "i18n_en_tooltip": "Refined tastes. Likes her prey rare."
            }
          },
          {
            "op": "set",
            "field": "maxThisUnit",
            "value": {
              "type": "math",
              "expression": "max(1, ceil(4 * (spawn_mult / 3)))",
              "variables": {
                "spawn_mult": {
                  "type": "mod_option",
                  "key": "raptor_spawncountmult",
                  "default": 3
                }
              }
            }
          }
        ]
      }
    ]
  },
  {
    "name": "Cross Faction Taxed Units (Factories)",
    "description": "Creates taxed versions of T2 factories",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "customParam",
        "key": "techlevel",
        "value": 2
      },
      {
        "type": "customParamMatch",
        "key": "subfolder",
        "regex": "Fact"
      },
      {
        "type": "nameNotMatch",
        "regex": ".* %(Taxed%)$"
      }
    ],
    "mutations": [
      {
        "op": "clone_unit",
        "source": "SELF",
        "targetSuffix": "_taxed",
        "mutations": [
          {
            "op": "multiply",
            "field": "energyCost",
            "factor": 1.7
          },
          {
            "op": "multiply",
            "field": "metalCost",
            "factor": 1.7
          },
          {
            "op": "set",
            "field": "name",
            "value": {
              "type": "math",
              "expression": "name .. ' (Taxed)'",
              "variables": {}
            }
          },
          {
            "op": "table_merge",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": {
                "type": "math",
                "expression": "humanname .. ' (Taxed)'",
                "variables": {
                  "humanname": "def.customparams.i18n_en_humanname"
                }
              }
            }
          }
        ]
      }
    ]
  },
  {
    "name": "Cross Faction Taxed Units (Labs)",
    "description": "Creates taxed versions of T2 labs",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "customParam",
        "key": "techlevel",
        "value": 2
      },
      {
        "type": "customParamMatch",
        "key": "subfolder",
        "regex": "Lab"
      },
      {
        "type": "nameNotMatch",
        "regex": ".* %(Taxed%)$"
      }
    ],
    "mutations": [
      {
        "op": "clone_unit",
        "source": "SELF",
        "targetSuffix": "_taxed",
        "mutations": [
          {
            "op": "multiply",
            "field": "energyCost",
            "factor": 1.7
          },
          {
            "op": "multiply",
            "field": "metalCost",
            "factor": 1.7
          },
          {
            "op": "set",
            "field": "name",
            "value": {
              "type": "math",
              "expression": "name .. ' (Taxed)'",
              "variables": {}
            }
          },
          {
            "op": "table_merge",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": {
                "type": "math",
                "expression": "humanname .. ' (Taxed)'",
                "variables": {
                  "humanname": "def.customparams.i18n_en_humanname"
                }
              }
            }
          }
        ]
      }
    ]
  },
  {
    "name": "T3 Mex Footprint",
    "description": "Adjusts footprints for T3 metal extractors",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameInList",
        "names": [
          "armmmkrt3",
          "cormmkrt3",
          "legadveconvt3"
        ]
      }
    ],
    "mutations": [
      {
        "op": "set",
        "field": "footprintx",
        "value": 6
      },
      {
        "op": "set",
        "field": "footprintz",
        "value": 6
      }
    ]
  },
  {
    "name": "Armada T3 Eco Build Options",
    "description": "Adds T3 eco buildings to Armada T2 builders",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameInList",
        "names": [
          "armack",
          "armaca",
          "armacv"
        ]
      }
    ],
    "mutations": [
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "armafust3"
      },
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "armmmkrt3"
      }
    ]
  },
  {
    "name": "Cortex T3 Eco Build Options",
    "description": "Adds T3 eco buildings to Cortex T2 builders",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameInList",
        "names": [
          "corack",
          "coraca",
          "coracv"
        ]
      }
    ],
    "mutations": [
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "corafust3"
      },
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "cormmkrt3"
      }
    ]
  },
  {
    "name": "Legion T3 Eco Build Options",
    "description": "Adds T3 eco buildings to Legion T2 builders",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameInList",
        "names": [
          "legack",
          "legaca",
          "legacv"
        ]
      }
    ],
    "mutations": [
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "legafust3"
      },
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "legadveconvt3"
      }
    ]
  },
  {
    "name": "Legion T2 Commander Build Options",
    "description": "Adds legdtf to legck build options",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameInList",
        "names": [
          "legck"
        ]
      }
    ],
    "mutations": [
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "legdtf"
      }
    ]
  },
  {
    "name": "T3 Storage Footprints",
    "description": "Adjusts footprints for T3 storage buildings",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameInList",
        "names": [
          "coruwadves",
          "legadvestore"
        ]
      }
    ],
    "mutations": [
      {
        "op": "set",
        "field": "footprintx",
        "value": 4
      },
      {
        "op": "set",
        "field": "footprintz",
        "value": 4
      }
    ]
  },
  {
    "name": "Create T3 Construction Turrets",
    "description": "Creates T3 construction turrets for each faction",
    "scope": "Global",
    "conditions": [],
    "mutations": [
      {
        "op": "clone_unit",
        "source": "armnanotct2",
        "target": "armnanotct3",
        "mutations": [
          {
            "op": "set",
            "field": "metalcost",
            "value": 3700
          },
          {
            "op": "set",
            "field": "energycost",
            "value": 62000
          },
          {
            "op": "set",
            "field": "builddistance",
            "value": 550
          },
          {
            "op": "set",
            "field": "buildtime",
            "value": 108000
          },
          {
            "op": "set",
            "field": "health",
            "value": 8800
          },
          {
            "op": "set",
            "field": "workertime",
            "value": 1900
          },
          {
            "op": "set",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": "T3 Construction Turret"
            }
          }
        ]
      },
      {
        "op": "clone_unit",
        "source": "cornanotct2",
        "target": "cornanotct3",
        "mutations": [
          {
            "op": "set",
            "field": "metalcost",
            "value": 3700
          },
          {
            "op": "set",
            "field": "energycost",
            "value": 62000
          },
          {
            "op": "set",
            "field": "builddistance",
            "value": 550
          },
          {
            "op": "set",
            "field": "buildtime",
            "value": 108000
          },
          {
            "op": "set",
            "field": "health",
            "value": 8800
          },
          {
            "op": "set",
            "field": "workertime",
            "value": 1900
          },
          {
            "op": "set",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": "T3 Construction Turret"
            }
          }
        ]
      },
      {
        "op": "clone_unit",
        "source": "legnanotct2",
        "target": "legnanotct3",
        "mutations": [
          {
            "op": "set",
            "field": "metalcost",
            "value": 3700
          },
          {
            "op": "set",
            "field": "energycost",
            "value": 62000
          },
          {
            "op": "set",
            "field": "builddistance",
            "value": 550
          },
          {
            "op": "set",
            "field": "buildtime",
            "value": 108000
          },
          {
            "op": "set",
            "field": "health",
            "value": 8800
          },
          {
            "op": "set",
            "field": "workertime",
            "value": 1900
          },
          {
            "op": "set",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": "T3 Construction Turret"
            }
          }
        ]
      }
    ]
  },
  {
    "name": "Create Epic Aide Units",
    "description": "Creates T3 Epic Aide units for each faction",
    "scope": "Global",
    "conditions": [],
    "mutations": [
      {
        "op": "clone_unit",
        "source": "armdecom",
        "target": "armt3aide",
        "mutations": [
          {
            "op": "set",
            "field": "name",
            "value": "Armada Epic Aide"
          },
          {
            "op": "set",
            "field": "workertime",
            "value": 6000
          },
          {
            "op": "set",
            "field": "buildoptions",
            "value": [
              "armafust3",
              "armnanotct2",
              "armnanotct3",
              "armalab",
              "armavp",
              "armaap",
              "armgatet3",
              "armflak",
              "armmmkrt3",
              "armuwadvmst3",
              "armadvestoret3",
              "armgate",
              "armfort",
              "armshltx",
              "corgant_taxed",
              "leggant_taxed",
              "armamd",
              "armmercury",
              "armbrtha",
              "armminivulc",
              "armvulc",
              "armanni",
              "armannit3",
              "armlwall",
              "legendary_pulsar"
            ]
          }
        ]
      },
      {
        "op": "clone_unit",
        "source": "cordecom",
        "target": "cort3aide",
        "mutations": [
          {
            "op": "set",
            "field": "name",
            "value": "Cortex Epic Aide"
          },
          {
            "op": "set",
            "field": "workertime",
            "value": 6000
          },
          {
            "op": "set",
            "field": "buildoptions",
            "value": [
              "corafust3",
              "cornanotct2",
              "cornanotct3",
              "coralab",
              "coravp",
              "coraap",
              "corgatet3",
              "corflak",
              "cormmkrt3",
              "coruwadvmst3",
              "coradvestoret3",
              "corgate",
              "corfort",
              "corgant",
              "armshltx_taxed",
              "leggant_taxed",
              "corfmd",
              "corscreamer",
              "cordoomt3",
              "corbuzz",
              "corminibuzz",
              "corint",
              "cordoom",
              "corhllllt",
              "cormwall",
              "legendary_bulwark"
            ]
          }
        ]
      },
      {
        "op": "clone_unit",
        "source": "legdecom",
        "target": "legt3aide",
        "mutations": [
          {
            "op": "set",
            "field": "name",
            "value": "Legion Epic Aide"
          },
          {
            "op": "set",
            "field": "workertime",
            "value": 6000
          },
          {
            "op": "set",
            "field": "buildoptions",
            "value": [
              "legafust3",
              "legnanotct2",
              "legnanotct3",
              "legalab",
              "legavp",
              "legaap",
              "leggatet3",
              "legflak",
              "legadveconvt3",
              "legamstort3",
              "legadvestoret3",
              "legdeflector",
              "legforti",
              "leggant",
              "armshltx_taxed",
              "corgant_taxed",
              "legabm",
              "legstarfall",
              "legministarfall",
              "leglraa",
              "legbastion",
              "legrwall",
              "leglrpc",
              "legendary_bastion",
              "legapopupdef",
              "legdtf"
            ]
          }
        ]
      }
    ]
  },
  {
    "name": "Add Epic Aides to Build Options (Armada)",
    "description": "Adds T3 Epic Aides to Experimental Gantries",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameInList",
        "names": [
          "armshltx"
        ]
      }
    ],
    "mutations": [
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "armt3aide"
      }
    ]
  },
  {
    "name": "Add Epic Aides to Build Options (Cortex)",
    "description": "Adds T3 Epic Aides to Experimental Gantries",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameInList",
        "names": [
          "corgant"
        ]
      }
    ],
    "mutations": [
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "cort3aide"
      }
    ]
  },
  {
    "name": "Add Epic Aides to Build Options (Legion)",
    "description": "Adds T3 Epic Aides to Experimental Gantries",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameInList",
        "names": [
          "leggant"
        ]
      }
    ],
    "mutations": [
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "legt3aide"
      }
    ]
  },
  {
    "name": "Create Meatball Launcher",
    "scope": "Global",
    "conditions": [],
    "mutations": [
      {
        "op": "clone_unit",
        "source": "armbotrail",
        "target": "armmeatball",
        "mutations": [
          {
            "op": "table_merge",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": "Meatball Launcher"
            }
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "range",
                "value": 7550
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "metalpershot",
                "value": 5300
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "energypershot",
                "value": 96000
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "reloadtime",
                "value": 0.5
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "table_merge",
                "field": "customparams",
                "value": {
                  "stockpilelimit": 50,
                  "spawns_name": "armmeatball"
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "name": "Create Assimilator Launcher",
    "scope": "Global",
    "conditions": [],
    "mutations": [
      {
        "op": "clone_unit",
        "source": "armbotrail",
        "target": "armassimilator",
        "mutations": [
          {
            "op": "table_merge",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": "Assimilator Launcher"
            }
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "range",
                "value": 7550
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "metalpershot",
                "value": 4500
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "energypershot",
                "value": 80000
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "reloadtime",
                "value": 0.5
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "table_merge",
                "field": "customparams",
                "value": {
                  "stockpilelimit": 50,
                  "spawns_name": "armassimilator"
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "name": "Create Epic Pawn Launcher",
    "scope": "Global",
    "conditions": [],
    "mutations": [
      {
        "op": "clone_unit",
        "source": "armbotrail",
        "target": "armpwt4",
        "mutations": [
          {
            "op": "table_merge",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": "Epic Pawn Launcher"
            }
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "range",
                "value": 7550
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "metalpershot",
                "value": 14200
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "energypershot",
                "value": 480000
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "reloadtime",
                "value": 0.5
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "table_merge",
                "field": "customparams",
                "value": {
                  "stockpilelimit": 50,
                  "spawns_name": "armpwt4"
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "name": "Create Armada T1 Launcher",
    "scope": "Global",
    "conditions": [],
    "mutations": [
      {
        "op": "clone_unit",
        "source": "armbotrail",
        "target": "armt1",
        "mutations": [
          {
            "op": "table_merge",
            "field": "customparams",
            "value": {
              "i18n_en_humanname": "Armada T1 Launcher"
            }
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "stockpiletime",
                "value": 0.5
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "range",
                "value": 7550
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "metalpershot",
                "value": 250
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "energypershot",
                "value": 12500
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "set",
                "field": "reloadtime",
                "value": 0.5
              }
            ]
          },
          {
            "op": "modify_weapon",
            "weaponName": "arm_botrail",
            "mutations": [
              {
                "op": "table_merge",
                "field": "customparams",
                "value": {
                  "stockpilelimit": 50,
                  "spawns_name": "armham armjeth armpw armrock armwar armah armanac armmh armsh armart armfav armflash armjanus armpincer armsam armstump armzapper",
                  "spawns_mode": "random"
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "name": "Add Launchers to Cormandot4",
    "scope": "UnitDefsLoop",
    "conditions": [
      {
        "type": "nameMatch",
        "regex": "cormandot4"
      }
    ],
    "mutations": [
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "armmeatball"
      },
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "armassimilator"
      },
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "armpwt4"
      },
      {
        "op": "list_append",
        "field": "buildoptions",
        "value": "armt1"
      }
    ]
  }
]